<!DOCTYPE html><html lang="zh-cn"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> How dose the Execution Context work in JS · Snowgan</title><meta name="description" content="How dose the Execution Context work in JS - Snowgan"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicons2.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://snowgan.com/atom.xml" title="Snowgan"><link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"></head><body><div class="wrap"><header><h1 class="blog-title">Snowgan</h1><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">首页</a></li><li class="nav-list-item"><a href="/categories/" target="_self" class="nav-list-link">分类</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">归档</a></li><li class="nav-list-item"><a href="/about/" target="_self" class="nav-list-link">关于我</a></li></ul></header><section class="container"><div class="post"><div class="bread-crumb">/<a href="/categories/Front-End/" class="bread-crumb-item">Front-End</a>/<a href="/categories/Front-End/JavaScript/" class="bread-crumb-item">JavaScript</a></div><article class="post-block"><div class="post-toc"><div class="toc-title">CONTENT</div><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#How-to-create-a-EC"><span class="toc-text">How to create a EC</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Execution-Stack"><span class="toc-text">Execution Stack</span></a></li></ol></div><h1 class="post-title">How dose the Execution Context work in JS</h1><div class="post-info">Jun 21, 2017<span class="tags-info"><a href="/tags/JavaScript/" class="tag-link">JavaScript</a><a href="/tags/Advanced/" class="tag-link">Advanced</a><a href="/tags/Execution-Context/" class="tag-link">Execution Context</a></span></div><div class="post-content"><p>The Execution Context(normally called ‘EC’) is an abstract concept which defines how to execute the javascript code. We can simply think of a execution context as the environment js code is executed in. And there can be numbers of EC in our program.</p>
<h3 id="How-to-create-a-EC"><a href="#How-to-create-a-EC" class="headerlink" title="How to create a EC"></a>How to create a EC</h3><p>We can create a new EC by below three ways:</p>
<ol>
<li><strong>Global EC</strong>: Will create a global EC at the begin of running application, and only one global EC in the whole program;</li>
<li><strong>Function EC</strong>: Will create a function EC each time one function is called. And enter to this new execution environment to run the function code. When the function return back, will ends this new EC and return to previoue EC which called the function.</li>
<li><strong>eval()</strong>: Using eval function also will create a EC, but it’s better to not use eval.</li>
</ol>
<a id="more"></a>
<h3 id="Execution-Stack"><a href="#Execution-Stack" class="headerlink" title="Execution Stack"></a>Execution Stack</h3><p>A <strong>execution stack</strong> will help to manage those ECs because js running in a browser is implemented as a single thread, only 1 EC will be the active EC in one time and other EC will be queued.<br>The bottom of the stack will always be the <strong>global EC</strong>, and the top is a <strong>function EC</strong> that current code is being executed in.</p>
<p>When one EC(caller) create a new EC(callee) during its running time, means a function is called, the caller suspends its own execution and callee’s EC will be pushed into execution stack. When the callee return back, will ends its EC and return to caller’s EC to resume the rest code.</p>
<p>For example:</p>
<pre class=" language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> n<span class="token punctuation">;</span>
  <span class="token keyword">const</span> x <span class="token operator">=</span> <span class="token function">sum</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> x <span class="token operator">+</span> n<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>The execution stack’s work flow like below:<br><img src="/image/ExecutionContext/001.gif" width="450" alt="Execution Stack" title="Execution Stack" style="margin-left: 0;"></p>
</div></article></div></section><footer><div class="paginator"><a href="/2018/01/10/Install MongoDB on Debian 9/" class="prev">&lt;&lt;PREV: Install MongoDB on Debian 9</a><a href="/2017/03/07/Flexbox Table/" class="next">NEXT: Flexbox Table>></a></div><div id="disqus_thread"></div><script>var disqus_config = function () {
    this.page.url = 'http://snowgan.com/2017/06/21/How dose the Execution Context work in JS/';
    this.page.identifier = '2017/06/21/How dose the Execution Context work in JS/';
};
(function() {
    var d = document, s = d.createElement('script');
    s.src = '//' + 'snowgan' + '.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
})();</script><script id="dsq-count-scr" src="//snowgan.disqus.com/count.js" async></script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript><div class="copyright"><p>© 2015 - 2018 <a href="http://snowgan.com">Snowgan</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create', 'UA-90028164-1', 'auto');ga('send', 'pageview');</script></body></html>
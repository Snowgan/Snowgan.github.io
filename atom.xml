<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Snowgan</title>
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://snowgan.com/"/>
  <updated>2018-01-18T15:50:16.043Z</updated>
  <id>http://snowgan.com/</id>
  
  <author>
    <name>Snowgan</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Webpack Learning</title>
    <link href="http://snowgan.com/2017/01/26/Webpack%20Learning/"/>
    <id>http://snowgan.com/2017/01/26/Webpack Learning/</id>
    <published>2017-01-26T15:31:00.000Z</published>
    <updated>2018-01-18T15:50:16.043Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Why-use-webpack"><a href="#Why-use-webpack" class="headerlink" title="Why use webpack"></a>Why use webpack</h2><p>Why?</p>
<p>It’s the most popular build tool for javascript(According stars on github).</p>
<ul>
<li>Even though its configuration is too complex if we want a flexible build environment.</li>
<li>Even though it will bundle lots of wrapper code in final js file so it’s more overhead if our project is very simple.</li>
<li>Not to mention that there are many plugins to learn</li>
</ul>
<p>OK, that’s my hard points during my webpack trip.</p>
<p>But…</p>
<a id="more"></a>
<p>I think Webpack is a great module bundler that bundle all of your javascripts, css, images and fonts into one or more static files according to their dependency net.</p>
<h2 id="How-to-use-webpack"><a href="#How-to-use-webpack" class="headerlink" title="How to use webpack"></a>How to use webpack</h2><p>Webpack worked via a configuration object. It’s a js file named webpack.config.js by default.<br>Please refer to office ducuments for details : )</p>
<h3 id="Level-0"><a href="#Level-0" class="headerlink" title="Level 0"></a>Level 0</h3><p>Basicly we need to defined an entry file from which webpack start work.</p>
<p>Also an output destination to store generated bundle files.<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">  <span class="comment">// entry: String | Array | Object</span></div><div class="line">  entry: <span class="string">'./src/main.js'</span>,</div><div class="line">  output: &#123;</div><div class="line">    path: <span class="string">'./dist'</span>,</div><div class="line">    filename: <span class="string">'build.js'</span>,</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"><span class="comment">// Webpack will start from main.js in src folder, and create dist folder after work to place the bundle file named build.js</span></div></pre></td></tr></table></figure></p>
<blockquote>
<p><strong>Tips</strong></p>
<p>We can use Node’s path module to avoid relative path issue.</p>
<p><em>entry: path.resolve(__dirname, ‘./src/main.js’)</em></p>
</blockquote>
<p><strong>Multiple entries</strong></p>
<p>When we use object value to define the entry, we can define multiple entries by use more than one property. The property key can be used by the variable ‘<strong>[name]</strong>‘<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">  entry: &#123;</div><div class="line">    home: path.resolve(__dirname, <span class="string">'./src/home.js'</span>),</div><div class="line">    <span class="string">'about-me'</span>: path.resolve(__dirname, <span class="string">'./src/about.js'</span>),</div><div class="line">    <span class="comment">// path string will generate relative path in target folder</span></div><div class="line">    <span class="string">'sub/child'</span>: path.resolve(__dirname, <span class="string">'./src/child.js'</span>),</div><div class="line">  &#125;,</div><div class="line">  output: &#123;</div><div class="line">    path: <span class="string">'./dist'</span>,</div><div class="line">    filename: <span class="string">'[name].js'</span>,</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"><span class="comment">// The bundled structure:</span></div><div class="line"><span class="comment">// |- dist</span></div><div class="line"><span class="comment">// |- - home.js</span></div><div class="line"><span class="comment">// |- - about-me.js</span></div><div class="line"><span class="comment">// |- - sub</span></div><div class="line"><span class="comment">// |- - - child.js</span></div></pre></td></tr></table></figure></p>
<blockquote>
<p><strong>Tips</strong></p>
<p>String type entry also equal to object type entry with one property and the property key is main.</p>
<p>entry: path.resolve(__dirname, ‘./src/main.js’)</p>
<p>entry: {  main: path.resolve(__dirname, ‘./src/main.js’)  }</p>
</blockquote>
<h3 id="Level-1"><a href="#Level-1" class="headerlink" title="Level 1"></a>Level 1</h3><p>The entry just defined what files we are handling. The next important thing is how to preprocess the source files to make them work fine in module bundling.</p>
<p>For example:</p>
<p>If we write ES6 syntax that browsers cannot support currently, we need to use babel to transform them to ES5 syntax;</p>
<p>If we want to import css, image, font files like a normal js file, we also need a transformation to do it;</p>
<p>If we use sass, we need to compile it;<br>…</p>
<p>We can do all of these things using <strong>loaders</strong>.</p>
<p>First you need to install the loaders you want, like babel-loader, css-loader, sass-loader.</p>
<p>And then config how to use the loaders. We can define in webpack.config.js.<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">  <span class="built_in">module</span>: &#123;</div><div class="line">    rules: [</div><div class="line">      &#123;</div><div class="line">        test: <span class="regexp">/\.js$/</span>,</div><div class="line">        include: [path.resolve(__dirname, <span class="string">"src"</span>)],</div><div class="line">        exclude: [path.resolve(__dirname, <span class="string">"src/mock"</span>)],</div><div class="line">        <span class="comment">// these are matching conditions, each accepting a regular expression or string</span></div><div class="line">        <span class="comment">// test and include have the same behavior, both must be matched</span></div><div class="line">        <span class="comment">// exclude must not be matched (takes preferrence over test and include)</span></div><div class="line">        <span class="comment">// Best practices:</span></div><div class="line">        <span class="comment">// - Use RegExp only in test and for filename matching</span></div><div class="line">        <span class="comment">// - Use arrays of absolute paths in include and exclude</span></div><div class="line">        <span class="comment">// - Try to avoid exclude and prefer include</span></div><div class="line">        loader: <span class="string">'babel-loader'</span>,</div><div class="line">        options: &#123;</div><div class="line">          presets: [<span class="string">'env'</span>]</div><div class="line">        &#125;</div><div class="line">      &#125;</div><div class="line">    ]</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"><span class="comment">// This configuration means when use require()/import statement to solve a file end with '.js' in ./src folder but not in ./src/mock, use the babel-loader to transform it before add it to the bundle</span></div></pre></td></tr></table></figure></p>
<p>There are some most used loaders:</p>
<ul>
<li><a href="https://github.com/webpack-contrib/style-loader" target="_blank" rel="external">style-loader</a> Adds CSS to the DOM by injecting a \<style\> tag</style\></li>
<li><a href="https://github.com/webpack-contrib/css-loader" target="_blank" rel="external">css-loader</a> Interprets @import and url() like import/require() and will resolve them</li>
<li><a href="https://github.com/babel/babel-loader" target="_blank" rel="external">babel-loader</a> Compile js using babel</li>
<li><a href="https://github.com/webpack-contrib/file-loader" target="_blank" rel="external">file-loader</a> Emits the file into the output folder and returns its public URL</li>
<li><a href="https://github.com/webpack-contrib/url-loader" target="_blank" rel="external">url-loader</a> Works like the file-loader, but can return a DataURL if the file is smaller than a byte limit.</li>
</ul>
<p>We can apply multiple loaders. They are are executed in reverse order of definition in rules(bottom to top).<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">module</span>: &#123;</div><div class="line">  rules: [</div><div class="line">    &#123;</div><div class="line">      type: <span class="regexp">/\.css$/</span>,</div><div class="line">      use: [</div><div class="line">        <span class="string">'style-loader'</span>,</div><div class="line">        &#123;</div><div class="line">          loader: <span class="string">'css-loader'</span>,</div><div class="line">          options: &#123;</div><div class="line">            ...</div><div class="line">          &#125;</div><div class="line">        &#125;</div><div class="line">      ]</div><div class="line">    &#125;</div><div class="line">  ]</div><div class="line">&#125;</div><div class="line"><span class="comment">// Execute loaders like style(css(test.css))</span></div></pre></td></tr></table></figure></p>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;Why-use-webpack&quot;&gt;&lt;a href=&quot;#Why-use-webpack&quot; class=&quot;headerlink&quot; title=&quot;Why use webpack&quot;&gt;&lt;/a&gt;Why use webpack&lt;/h2&gt;&lt;p&gt;Why?&lt;/p&gt;
&lt;p&gt;It’s the most popular build tool for javascript(According stars on github).&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Even though its configuration is too complex if we want a flexible build environment.&lt;/li&gt;
&lt;li&gt;Even though it will bundle lots of wrapper code in final js file so it’s more overhead if our project is very simple.&lt;/li&gt;
&lt;li&gt;Not to mention that there are many plugins to learn&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;OK, that’s my hard points during my webpack trip.&lt;/p&gt;
&lt;p&gt;But…&lt;/p&gt;
    
    </summary>
    
      <category term="Front-End" scheme="http://snowgan.com/categories/Front-End/"/>
    
      <category term="Webpack" scheme="http://snowgan.com/categories/Front-End/Webpack/"/>
    
    
      <category term="Webpack" scheme="http://snowgan.com/tags/Webpack/"/>
    
      <category term="Tool" scheme="http://snowgan.com/tags/Tool/"/>
    
  </entry>
  
  <entry>
    <title>Prototype &amp; Inheritance</title>
    <link href="http://snowgan.com/2017/01/11/Prototype&amp;Inheritance/"/>
    <id>http://snowgan.com/2017/01/11/Prototype&amp;Inheritance/</id>
    <published>2017-01-11T12:01:00.000Z</published>
    <updated>2017-11-29T15:10:01.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="Prototype"><a href="#Prototype" class="headerlink" title="Prototype"></a>Prototype</h3><h4 id="object-prototype-and-prototype-chain"><a href="#object-prototype-and-prototype-chain" class="headerlink" title="object prototype and prototype chain"></a>object prototype and prototype chain</h4><p>Every object in Javascript has a prototype. And the prototype also is an object.</p>
<p>So we can get a prototype chain and the end of the chain links to <strong>Object.prototype</strong> whose prototype is null.</p>
<p>When trying to access a property of an object, will firstly find in object self. If cannot find it, will look up its prototype, and so on until find the property or the end of the prototype chain is reached.<br><a id="more"></a></p>
<h4 id="Constructor-and-Instance"><a href="#Constructor-and-Instance" class="headerlink" title="Constructor and Instance"></a>Constructor and Instance</h4><p>But what is “Object.prototype”? It’s quite different from the object prototype we mentioned above.</p>
<p>Object is a constructor. In Javascript, constructor is a normal function which is called with keyword ‘new’. Like below:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> foo = <span class="keyword">new</span> Foo();</div></pre></td></tr></table></figure></p>
<p>The function <strong>Foo</strong> is a constructor. It can be used to create and initialize an object.</p>
<p>The variable <strong>foo</strong> is an instance object of the constructor Foo.</p>
<p>Every function in Javascript has a property named ‘prototype’. And this property ia an object.</p>
<p>So when the function is called as a constructor, the function property ‘prototype’ will be assigned as the prototype of the instance created by the constructor</p>
<h4 id="proto"><a href="#proto" class="headerlink" title="__proto__"></a>__proto__</h4><p>The prototype can be accessed by ‘__proto__‘ property, but it’s not a standard property and depends on browsers’ implement.</p>
<p>Examples:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Equal to: var obj = new Object(&#123; a: 'a' &#125;)</span></div><div class="line"><span class="keyword">var</span> obj = &#123; <span class="attr">a</span>: <span class="string">'a'</span> &#125;;</div><div class="line"><span class="built_in">console</span>.log(obj.__proto__ === <span class="built_in">Object</span>.prototype);  <span class="comment">// true</span></div><div class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.prototype.constructor === <span class="built_in">Object</span>);  <span class="comment">// true</span></div><div class="line"></div><div class="line"><span class="comment">// Equal to: var obj = new Array(1, 2)</span></div><div class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>];</div><div class="line"><span class="built_in">console</span>.log(arr.__proto__ === <span class="built_in">Array</span>.prototype);  <span class="comment">// true</span></div><div class="line"><span class="built_in">console</span>.log(<span class="built_in">Array</span>.prototype.__proto__ === <span class="built_in">Object</span>.prototype);  <span class="comment">// true</span></div><div class="line"><span class="built_in">console</span>.log(<span class="built_in">Array</span>.prototype.constructor === <span class="built_in">Array</span>);  <span class="comment">// true</span></div></pre></td></tr></table></figure>
<p><img src="/image/Prototype&Inheritance/001.png" width="450" alt="object_prototype" title="object_prototype"></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Living</span>(<span class="params">age</span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.alive = <span class="literal">true</span>;</div><div class="line">  <span class="keyword">this</span>.age = age;</div><div class="line">&#125;</div><div class="line">Living.prototype.growup = <span class="function"><span class="keyword">function</span>(<span class="params">time</span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.age += time;</div><div class="line">&#125;;</div><div class="line"><span class="keyword">const</span> foo = <span class="keyword">new</span> Living(<span class="number">2</span>);</div></pre></td></tr></table></figure>
<p><img src="/image/Prototype&Inheritance/002.png" width="450" alt="object_prototype2" title="object_prototype2"></p>
]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;Prototype&quot;&gt;&lt;a href=&quot;#Prototype&quot; class=&quot;headerlink&quot; title=&quot;Prototype&quot;&gt;&lt;/a&gt;Prototype&lt;/h3&gt;&lt;h4 id=&quot;object-prototype-and-prototype-chain&quot;&gt;&lt;a href=&quot;#object-prototype-and-prototype-chain&quot; class=&quot;headerlink&quot; title=&quot;object prototype and prototype chain&quot;&gt;&lt;/a&gt;object prototype and prototype chain&lt;/h4&gt;&lt;p&gt;Every object in Javascript has a prototype. And the prototype also is an object.&lt;/p&gt;
&lt;p&gt;So we can get a prototype chain and the end of the chain links to &lt;strong&gt;Object.prototype&lt;/strong&gt; whose prototype is null.&lt;/p&gt;
&lt;p&gt;When trying to access a property of an object, will firstly find in object self. If cannot find it, will look up its prototype, and so on until find the property or the end of the prototype chain is reached.&lt;br&gt;
    
    </summary>
    
      <category term="Front-End" scheme="http://snowgan.com/categories/Front-End/"/>
    
      <category term="JavaScript" scheme="http://snowgan.com/categories/Front-End/JavaScript/"/>
    
    
      <category term="JavaScript" scheme="http://snowgan.com/tags/JavaScript/"/>
    
      <category term="Advanced" scheme="http://snowgan.com/tags/Advanced/"/>
    
      <category term="Prototype" scheme="http://snowgan.com/tags/Prototype/"/>
    
  </entry>
  
  <entry>
    <title>Loop in JS</title>
    <link href="http://snowgan.com/2017/01/05/Loop%20in%20JS/"/>
    <id>http://snowgan.com/2017/01/05/Loop in JS/</id>
    <published>2017-01-05T06:30:00.000Z</published>
    <updated>2017-11-29T15:01:16.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="For-loop"><a href="#For-loop" class="headerlink" title="For loop"></a>For loop</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; Things.length; i++) &#123;</div><div class="line">  Things[i]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>The performance may be slow as the length property of Things will be accessed on each loop iteration.</p>
<p>A better way is to cache the length at initial phase, so we just access the length property once during the whole loop.<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0.</span> len = Things.length; i &lt; len; i++) &#123;</div><div class="line">  Things[i]</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>further micro-optimization:</p>
<p>cut the extra variable but reverse loop order<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = Things.length; i--;) &#123;</div><div class="line">  Things[i]</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<a id="more"></a>
<h3 id="For-In-loop"><a href="#For-In-loop" class="headerlink" title="For-In loop"></a>For-In loop</h3><p>To iterates over enumerable properties of an object. Also include those enumerable properties on prototype chain.</p>
<p>This should not be used to iterate over an Array since the iterating order is not guaranteed.</p>
<p>The method <strong>hasOwnProperty()</strong> of Object can filter the properties on prototype chain.<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.fooProp = <span class="string">'foo\'s property'</span>;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.barProp = <span class="string">'bar\'s property'</span>;</div><div class="line">&#125;</div><div class="line">bar.prototype = <span class="keyword">new</span> foo();</div><div class="line"><span class="keyword">var</span> inst = <span class="keyword">new</span> bar();</div><div class="line"><span class="keyword">for</span> (<span class="keyword">const</span> prop <span class="keyword">in</span> inst) &#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;prop&#125;</span>: <span class="subst">$&#123;inst[prop]&#125;</span>`</span>);</div><div class="line">&#125;</div><div class="line"><span class="built_in">console</span>.log(<span class="string">'=======Use hasOwnProperty()======='</span>);</div><div class="line"><span class="keyword">for</span> (<span class="keyword">const</span> prop <span class="keyword">in</span> inst) &#123;</div><div class="line">  <span class="keyword">if</span> (inst.hasOwnProperty(prop)) &#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;prop&#125;</span>: <span class="subst">$&#123;inst[prop]&#125;</span>`</span>);</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">// Console result</span></div><div class="line"><span class="comment">// barProp: bar's property</span></div><div class="line"><span class="comment">// fooProp: foo's property</span></div><div class="line"><span class="comment">// =======Use hasOwnProperty()=======</span></div><div class="line"><span class="comment">// barProp: bar's property</span></div></pre></td></tr></table></figure></p>
<p>We can also directly call the hasOwnProperty on Object by <code>Object.prototype.hasOwnProperty.call(obj, prop)</code></p>
<p>This way will be better in case the hasOwnProperty method has been redefined</p>
]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;For-loop&quot;&gt;&lt;a href=&quot;#For-loop&quot; class=&quot;headerlink&quot; title=&quot;For loop&quot;&gt;&lt;/a&gt;For loop&lt;/h3&gt;&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; i = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;; i &amp;lt; Things.length; i++) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  Things[i]&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;The performance may be slow as the length property of Things will be accessed on each loop iteration.&lt;/p&gt;
&lt;p&gt;A better way is to cache the length at initial phase, so we just access the length property once during the whole loop.&lt;br&gt;&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; i = &lt;span class=&quot;number&quot;&gt;0.&lt;/span&gt; len = Things.length; i &amp;lt; len; i++) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  Things[i]&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;further micro-optimization:&lt;/p&gt;
&lt;p&gt;cut the extra variable but reverse loop order&lt;br&gt;&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; i = Things.length; i--;) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  Things[i]&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="Front-End" scheme="http://snowgan.com/categories/Front-End/"/>
    
      <category term="JavaScript" scheme="http://snowgan.com/categories/Front-End/JavaScript/"/>
    
    
      <category term="JavaScript" scheme="http://snowgan.com/tags/JavaScript/"/>
    
      <category term="Grammer" scheme="http://snowgan.com/tags/Grammer/"/>
    
  </entry>
  
  <entry>
    <title>JavaScript中的this笔记</title>
    <link href="http://snowgan.com/2016/12/09/JavaScript%E4%B8%AD%E7%9A%84this%E7%AC%94%E8%AE%B0/"/>
    <id>http://snowgan.com/2016/12/09/JavaScript中的this笔记/</id>
    <published>2016-12-08T16:35:21.000Z</published>
    <updated>2017-08-20T13:31:51.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1-全局作用域下的this"><a href="#1-全局作用域下的this" class="headerlink" title="1. 全局作用域下的this"></a>1. 全局作用域下的this</h2><p>全局作用域下this的值由其js执行的宿主环境（浏览器、nodejs等）决定</p>
<p>在web浏览器中运行时，this与window对象等价，即<code>this === window</code></p>
<h2 id="2-函数作用域下的this"><a href="#2-函数作用域下的this" class="headerlink" title="2. 函数作用域下的this"></a>2. 函数作用域下的this</h2><p>函数作用域下this的值由其函数被调用的方式决定</p>
<p>函数调用方式有四种：</p>
<ol>
<li>作为对象方法被调用；</li>
<li>作为对象构造器，使用关键字new的形式被调用；</li>
<li>使用Function.prototype.apply()或Function.prototype.call()方法显式绑定this值</li>
<li>不属于以上任何一种，则作为普通函数被调用；</li>
</ol>
<a id="more"></a>
<h3 id="2-1-对象方法调用"><a href="#2-1-对象方法调用" class="headerlink" title="2.1 对象方法调用"></a>2.1 对象方法调用</h3><p>当对象的某一属性是一个函数，且通过该对象属性名调用函数时则视为对象方法调用，函数执行时的this指向<strong>对象本身</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">printName</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> obj1 = &#123;</div><div class="line">  name: <span class="string">'Mike'</span>,</div><div class="line">  func: printName</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">var</span> obj2 = &#123;</div><div class="line">  name: <span class="string">'Jenny'</span>,</div><div class="line">  func: printName</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">var</span> parent = &#123;</div><div class="line">  child: &#123;</div><div class="line">    name: <span class="string">'Anna'</span>,</div><div class="line">    func: printName</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">obj1.func(); <span class="comment">// 'Mike'  函数执行时的this === obj1</span></div><div class="line">obj2.func(); <span class="comment">// 'Jenny'  函数执行时的this === obj2</span></div><div class="line">parent.child.func(); <span class="comment">// 'Anna'  函数执行时的this === parent.child</span></div></pre></td></tr></table></figure>
<h3 id="2-2-对象构造器调用"><a href="#2-2-对象构造器调用" class="headerlink" title="2.2 对象构造器调用"></a>2.2 对象构造器调用</h3><p>在函数调用表达式前加上关键字new就完成了构造器调用<code>new Func()</code>，这个函数也被称作构造器，和其他面向对象语言类似，构造器主要用于构造一个实例对象，并完成一些初始化工作</p>
<p>构造器就是一个普通的函数，也可以直接跟()进行正常调用，当加上new之后，JS引擎的执行流程会发生变化，具体如下：</p>
<ol>
<li>新建一个空对象，其原型指向构造器的prototype属性</li>
<li>将this指向这个空对象</li>
<li>执行函数体</li>
<li>返回这个创建的对象，作为构造器调用的返回值</li>
</ol>
<p>所以在对象构造器调用方式下，this指向的是<strong>该构造器所创建的实例对象</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 通常作为构造器的函数名首字母大写(代码规范)</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.name = <span class="string">'Lee'</span>;</div><div class="line">  <span class="keyword">this</span>.func = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">new</span> Person();  <span class="comment">// 得到一个Person对象&#123; name: 'Lee', func: Function &#125;</span></div><div class="line"><span class="keyword">var</span> p1 = <span class="keyword">new</span> Person();  <span class="comment">// p1.func() === p1;</span></div><div class="line"><span class="keyword">var</span> p2 = <span class="keyword">new</span> Person();  <span class="comment">// p2.func() === p2;</span></div></pre></td></tr></table></figure>
<p>当构造器的函数体显式指定了返回值时，分两种情况：</p>
<ul>
<li>返回类型不是对象，构造器调用会忽略这条语句，返回创建的实例对象</li>
<li>返回类型是对象，构造器调用会执行这条语句，返回语句指定的对象</li>
</ul>
<h3 id="2-3-显式绑定"><a href="#2-3-显式绑定" class="headerlink" title="2.3 显式绑定"></a>2.3 显式绑定</h3><p>函数对象是Function构造器的一个实例，所以继承其原型上的方法，其中apply()和call()可以指定this和arguments的值</p>
<p><code>func.apply(thisVal[, argsArray])</code></p>
<p><code>func.call(thisVal[, args1, args2, ...])</code></p>
<p>两个方法的功能完全一样，区别在于apply传入由参数组成的数组或类数组对象，而call传入参数列表</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> obj1 = &#123;</div><div class="line">  name: <span class="string">'Mike'</span>,</div><div class="line">  func: <span class="function"><span class="keyword">function</span>(<span class="params">age</span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name + <span class="string">', '</span> + age);</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line">obj1.func(<span class="number">20</span>); <span class="comment">// 'Mike, 20'</span></div><div class="line">obj1.func.apply(&#123;<span class="attr">name</span>: <span class="string">'Jenny'</span>&#125;, [<span class="number">18</span>]); <span class="comment">// 'Jenny, 18'</span></div><div class="line">obj1.func.call(&#123;<span class="attr">name</span>: <span class="string">'Anna'</span>&#125;, <span class="number">10</span>); <span class="comment">// 'Anna, 10'</span></div></pre></td></tr></table></figure>
<p>另外还有一个方法bind()，将返回一个新函数，新函数的this始终指向传入的第一个参数，无论其以何种方式被调用。除此之外，函数体执行逻辑和原函数一样</p>
<p><code>func.bind(thisVal[, args1, args2, ...])</code></p>
<p>传入bind的参数列表和传入新函数的参数会依次组成新函数的arguments变量</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> obj1 = &#123;</div><div class="line">  name: <span class="string">'Mike'</span>,</div><div class="line">  func: <span class="function"><span class="keyword">function</span>(<span class="params">age</span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name + <span class="string">', '</span> + age);</div><div class="line">    <span class="built_in">console</span>.log(<span class="built_in">arguments</span>);</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> newFunc = obj1.func.bind(&#123;<span class="attr">name</span>: <span class="string">'Rose'</span>&#125;, <span class="number">50</span>);</div><div class="line">newFunc(<span class="number">25</span>); <span class="comment">// 'Rose, 50'  [50， 25]</span></div></pre></td></tr></table></figure>
<h3 id="2-4-普通函数调用"><a href="#2-4-普通函数调用" class="headerlink" title="2.4 普通函数调用"></a>2.4 普通函数调用</h3><p>普通函数调用的表现形式主要有以下几种：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 通过函数名调用</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params"></span>) </span>&#123;&#125;</div><div class="line">func();</div><div class="line"></div><div class="line"><span class="comment">// 通过指向一个函数对象的变量名来调用</span></div><div class="line"><span class="keyword">var</span> funcVar = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;;</div><div class="line">funcVar();</div><div class="line"></div><div class="line"><span class="comment">// IIFE调用</span></div><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;)();</div></pre></td></tr></table></figure>
<p>在非严格模式下this指向<strong>全局作用域下的this</strong></p>
<p>在严格模式下this为<strong>undefined</strong></p>
<h3 id="2-5-箭头函数的this（ES6）"><a href="#2-5-箭头函数的this（ES6）" class="headerlink" title="2.5 箭头函数的this（ES6）"></a>2.5 箭头函数的this（ES6）</h3><p>箭头函数是ES6新引进的语法，它的this指向被创建时所在作用域的this值，这一特点在回调函数中特别有用</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btn"</span>&gt;</span>Click<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></div><div class="line"><span class="javascript">  <span class="function"><span class="keyword">function</span> <span class="title">btnClick</span>(<span class="params"></span>) </span>&#123;</span></div><div class="line"><span class="javascript">    <span class="built_in">console</span>.log(<span class="keyword">this</span>);</span></div><div class="line"><span class="undefined">  &#125;</span></div><div class="line"><span class="javascript">  <span class="keyword">var</span> ele = <span class="built_in">document</span>.getElementById(<span class="string">'btn'</span>);</span></div><div class="line"><span class="javascript">  <span class="comment">// 事件函数的this指向的是被绑定的DOM元素本身</span></span></div><div class="line"><span class="javascript">  ele.addEventListener(<span class="string">'click'</span>, btnClick);  </span></div><div class="line"><span class="undefined">  </span></div><div class="line"><span class="javascript">  <span class="comment">// 箭头函数的this指向被创建时所在作用域的this</span></span></div><div class="line"><span class="javascript">  <span class="comment">// 此时箭头函数是定义在全局作用域里的，this指向window对象</span></span></div><div class="line"><span class="javascript">  ele.addEventListener(<span class="string">'click'</span>, () =&gt; &#123;<span class="built_in">console</span>.log(<span class="keyword">this</span>)&#125;); </span></div><div class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;1-全局作用域下的this&quot;&gt;&lt;a href=&quot;#1-全局作用域下的this&quot; class=&quot;headerlink&quot; title=&quot;1. 全局作用域下的this&quot;&gt;&lt;/a&gt;1. 全局作用域下的this&lt;/h2&gt;&lt;p&gt;全局作用域下this的值由其js执行的宿主环境（浏览器、nodejs等）决定&lt;/p&gt;
&lt;p&gt;在web浏览器中运行时，this与window对象等价，即&lt;code&gt;this === window&lt;/code&gt;&lt;/p&gt;
&lt;h2 id=&quot;2-函数作用域下的this&quot;&gt;&lt;a href=&quot;#2-函数作用域下的this&quot; class=&quot;headerlink&quot; title=&quot;2. 函数作用域下的this&quot;&gt;&lt;/a&gt;2. 函数作用域下的this&lt;/h2&gt;&lt;p&gt;函数作用域下this的值由其函数被调用的方式决定&lt;/p&gt;
&lt;p&gt;函数调用方式有四种：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;作为对象方法被调用；&lt;/li&gt;
&lt;li&gt;作为对象构造器，使用关键字new的形式被调用；&lt;/li&gt;
&lt;li&gt;使用Function.prototype.apply()或Function.prototype.call()方法显式绑定this值&lt;/li&gt;
&lt;li&gt;不属于以上任何一种，则作为普通函数被调用；&lt;/li&gt;
&lt;/ol&gt;
    
    </summary>
    
      <category term="Front-End" scheme="http://snowgan.com/categories/Front-End/"/>
    
      <category term="JavaScript" scheme="http://snowgan.com/categories/Front-End/JavaScript/"/>
    
    
      <category term="JavaScript" scheme="http://snowgan.com/tags/JavaScript/"/>
    
      <category term="this" scheme="http://snowgan.com/tags/this/"/>
    
  </entry>
  
  <entry>
    <title>JavaScript函数笔记</title>
    <link href="http://snowgan.com/2016/12/05/JavaScript%E5%87%BD%E6%95%B0%E7%AC%94%E8%AE%B0/"/>
    <id>http://snowgan.com/2016/12/05/JavaScript函数笔记/</id>
    <published>2016-12-04T16:32:58.000Z</published>
    <updated>2017-09-20T15:44:10.000Z</updated>
    
    <content type="html"><![CDATA[<p>和其他编程语言类似，JavaScript的函数也是用{}包裹的一个代码块，通过函数调用执行其方法体，能够进行值传参，并具有返回值，当没有显式声明返回值时，函数返回undefined。</p>
<h3 id="1-函数是第一类对象"><a href="#1-函数是第一类对象" class="headerlink" title="1. 函数是第一类对象"></a>1. 函数是第一类对象</h3><p>JS中的函数是一种对象类型，即是说可以当作对象来使用函数，相比其他对象类型，函数多了能被调用执行的功能。</p>
<p>函数和其他对象的使用对比：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 赋值声明</span></div><div class="line"><span class="keyword">var</span> obj = &#123;&#125;;</div><div class="line"><span class="keyword">var</span> func = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;;</div><div class="line"></div><div class="line"><span class="comment">// 可添加属性</span></div><div class="line">obj.name = <span class="string">'Test'</span>;</div><div class="line">func.name = <span class="string">'Test'</span>;</div><div class="line"></div><div class="line"><span class="comment">// 作为数组元素或对象属性值</span></div><div class="line"><span class="keyword">var</span> testArr = [];</div><div class="line">testArr.push(&#123;&#125;);</div><div class="line">testArr.push(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;);</div><div class="line"></div><div class="line"><span class="keyword">var</span> testObj = &#123;&#125;;</div><div class="line">testObj.item1 = &#123;&#125;;</div><div class="line">testObj.item2 = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;;</div><div class="line"></div><div class="line"><span class="comment">// 作为函数参数</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">testFunc1</span>(<span class="params">arg</span>) </span>&#123;&#125;;</div><div class="line">testFunc1(&#123;&#125;);</div><div class="line">testFunc1(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;);</div><div class="line"></div><div class="line"><span class="comment">// 作为函数返回值</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">testFunc2</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> &#123;&#125;</div><div class="line">&#125;;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">testFunc3</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<a id="more"></a>
<h3 id="2-函数声明和函数表达式"><a href="#2-函数声明和函数表达式" class="headerlink" title="2. 函数声明和函数表达式"></a>2. 函数声明和函数表达式</h3><p>函数声明和函数表达式是两种定义函数的方法，在使用上有些区别。</p>
<p>函数声明以关键字<strong>function</strong>开头，必须指定一个函数名，参数和返回值可选</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params">arg1, arg2...</span>) </span>&#123;</div><div class="line">  state1;</div><div class="line">  state2;</div><div class="line">  <span class="keyword">return</span> val;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>当函数作为表达式的一部分时（赋值右侧、函数参数、函数返回值等），则为函数表达式。函数表达式中的函数名为可选，没有指定函数名的称为匿名函数。</p>
<p><strong>IIFE(Immediately Invoked Function Expression)</strong></p>
<p><code>(function() {})()</code></p>
<p>立即执行函数表达式是指定义函数后立即执行函数体的方法，在函数表达式后加上()，和普通的函数调用方式一样，可传入参数</p>
<p>IIFE必须用一对括号包裹，JS解析器会将括号内的语句解析为一个表达式，如果不加括号，则会解析为一个函数申明，因为函数申明必须指定函数名，所以语句会报错。以下写法也是可以的：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;());</div><div class="line">+<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;();  <span class="comment">// 使用一元操作符也可以达到同样的目的</span></div><div class="line">-<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;();  <span class="comment">// 告诉解析器当前处理的是一个函数表达式而非函数声明</span></div><div class="line">!<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;();</div><div class="line">~<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;();</div></pre></td></tr></table></figure>
<h3 id="3-函数参数"><a href="#3-函数参数" class="headerlink" title="3. 函数参数"></a>3. 函数参数</h3><p>JS中的函数参数都是传值参数，即函数调用时传入的参数都是原数据值的一个拷贝</p>
<p>当传入的数据是<strong>原生</strong>类型，则在函数内部对参数的任何修改都不会影响函数外的原数据</p>
<p>当传入的数据是<strong>对象</strong>类型，由于拷贝的是一个引用，则在函数内部对应的参数指向的是同一个对象，通过参数对该对象的任何修改会同时影响函数外的原数据</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params">obj_argu</span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(obj_argu.name)    <span class="comment">// Snow</span></div><div class="line">  obj_argu.name = <span class="string">'Rain'</span>;</div><div class="line">  <span class="built_in">console</span>.log(obj_argu.name)    <span class="comment">// Rain</span></div><div class="line">  obj_argu = &#123;<span class="attr">name</span>: <span class="string">'Wind'</span>&#125;;</div><div class="line">  <span class="built_in">console</span>.log(obj_argu.name)    <span class="comment">// Wind</span></div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">var</span> Obj = &#123;<span class="attr">name</span>: <span class="string">'Snow'</span>&#125;;</div><div class="line">func(Obj);</div><div class="line"><span class="built_in">console</span>.log(Obj.name)    <span class="comment">// Rain</span></div></pre></td></tr></table></figure>
<p><img src="/image/JavaScript函数笔记/001.png" alt="Function1"></p>
<p><strong>参数默认值</strong></p>
<p>若不给参数传值，则参数的默认值为<code>undefined</code></p>
<p>ES6中可以指定默认值，直接在函数声明参数时赋值<code>function func(a, b = 1) {}</code></p>
<p><strong>剩余参数</strong></p>
<p>加上…前缀代表没有对应形参而剩下的所有实参组成的数组</p>
<p>剩余参数只能定义在形参的最后一个</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params">a, b, ...args</span>) </span>&#123;</div><div class="line">  <span class="comment">// a: 3, b: 6, args: [7, 1, 4, 9, 2]</span></div><div class="line">  <span class="built_in">console</span>.log(args.sort())</div><div class="line">&#125;</div><div class="line">func(<span class="number">3</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">1</span>, <span class="number">4</span>, <span class="number">9</span>, <span class="number">2</span>)  <span class="comment">// [1, 2, 4, 7, 9]</span></div></pre></td></tr></table></figure>
<p><strong>参数解构</strong></p>
<p>ES6新特性，可以使用对象解构或数组解构的形式来实现参数解构</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 对象解构</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params">&#123;a, b&#125;</span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;a&#125;</span> and <span class="subst">$&#123;b&#125;</span>`</span>);  <span class="comment">// You and me</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">func(&#123;<span class="attr">a</span>: <span class="string">'You'</span>, <span class="attr">b</span>: <span class="string">'me'</span>&#125;);</div><div class="line"></div><div class="line"><span class="comment">// 数组解构</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params">[a, b]</span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;a&#125;</span> and <span class="subst">$&#123;b&#125;</span>`</span>);  <span class="comment">// You and me</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">func([<span class="string">'You'</span>, <span class="string">'me'</span>]);</div></pre></td></tr></table></figure>
<h3 id="4-this和arguments"><a href="#4-this和arguments" class="headerlink" title="4. this和arguments"></a>4. this和arguments</h3><p>在调用函数时，一般会隐式传入两个对象：this和arguments</p>
<p><strong>this</strong></p>
<p>也被称作<strong>函数上下文</strong>，其值由函数被调用的方式决定。</p>
<p>this的情况复杂多变，其详解将单独成篇《<a href="/2016/12/09/JavaScript中的this笔记/">JavaScript中的this笔记</a>》</p>
<p><strong>arguments</strong></p>
<p>用于保存所有传入函数的参数，即使没有对应的形参。</p>
<p>具有length属性，可使用数组索引访问方式访问参数元素，但不能在其上调用其他数组方法，因为arguments是一个类数组结构，而不是真正的数组。</p>
<p>在非严格模式下，arguments中的参数元素是其对应形参变量的别名，改变任何一个都将会影响另一个</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params">a, b</span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="built_in">arguments</span>.length); <span class="comment">// 3</span></div><div class="line">  <span class="built_in">console</span>.log(<span class="built_in">arguments</span>[<span class="number">0</span>] === a);  <span class="comment">// true</span></div><div class="line">  </div><div class="line">  <span class="built_in">arguments</span>[<span class="number">0</span>] = <span class="string">'Byebye'</span>;</div><div class="line">  <span class="built_in">console</span>.log(a); <span class="comment">// 'Byebye'</span></div><div class="line">  </div><div class="line">  a = <span class="string">'Welcome'</span>;</div><div class="line">  <span class="built_in">console</span>.log(<span class="built_in">arguments</span>[<span class="number">0</span>]); <span class="comment">// 'Welcome'</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">func(<span class="string">'Hello'</span>, <span class="string">'World'</span>, <span class="string">'!'</span>);</div></pre></td></tr></table></figure>
<h3 id="5-箭头函数（ES6）"><a href="#5-箭头函数（ES6）" class="headerlink" title="5. 箭头函数（ES6）"></a>5. 箭头函数（ES6）</h3><p>是传统函数声明的简写形式，但不会绑定this，arguments，this继承它被创建时所在作用域的this，所以常用于创建回调函数</p>
<p>声明语法：<code>(param1, param2, …, paramN) =&gt; { statements }</code></p>
<p>其他声明规则：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 当函数体只有一个返回语句时，可省略&#123;&#125;</span></div><div class="line"><span class="comment">// 等于: (param1, param2, …, paramN) =&gt; &#123; return expression; &#125;</span></div><div class="line">(param1, param2, …, paramN) =&gt; expression</div><div class="line"></div><div class="line"><span class="comment">// 只有一个参数时括号可省略</span></div><div class="line"><span class="comment">// 等于: (singleParam) =&gt; &#123; statements &#125;</span></div><div class="line">singleParam =&gt; &#123; statements &#125;</div><div class="line"></div><div class="line"><span class="comment">// 无参时使用空括号</span></div><div class="line">() =&gt; &#123; statements &#125;</div><div class="line"></div><div class="line"><span class="comment">// 返回对象字面量时用括号括起来</span></div><div class="line">params =&gt; (&#123;<span class="attr">foo</span>: bar&#125;)</div><div class="line"></div><div class="line"><span class="comment">// ...rest表示其与参数</span></div><div class="line">(param1, param2, ...rest) =&gt; &#123; statements &#125;</div><div class="line"><span class="comment">// 可指定参数默认值</span></div><div class="line">(param1 = defaultValue1, param2, …, paramN = defaultValueN) =&gt; &#123; statements &#125;</div><div class="line"></div><div class="line"><span class="comment">// 可使用参数解构</span></div><div class="line"><span class="keyword">var</span> f = <span class="function">(<span class="params">[a, b] = [<span class="number">1</span>, <span class="number">2</span>], &#123;x: c&#125; = &#123;x: a + b&#125;</span>) =&gt;</span> a + b + c;</div><div class="line">f();  <span class="comment">// 6</span></div></pre></td></tr></table></figure></p>
<h3 id="6-bind方法"><a href="#6-bind方法" class="headerlink" title="6. bind方法"></a>6. bind方法</h3><p>每个函数对象都有一个内置的bind方法，调用该方法将生成一个新的函数对象，不管这个新的函数以何种方式调用，其this值由传入bind的参数决定。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;和其他编程语言类似，JavaScript的函数也是用{}包裹的一个代码块，通过函数调用执行其方法体，能够进行值传参，并具有返回值，当没有显式声明返回值时，函数返回undefined。&lt;/p&gt;
&lt;h3 id=&quot;1-函数是第一类对象&quot;&gt;&lt;a href=&quot;#1-函数是第一类对象&quot; class=&quot;headerlink&quot; title=&quot;1. 函数是第一类对象&quot;&gt;&lt;/a&gt;1. 函数是第一类对象&lt;/h3&gt;&lt;p&gt;JS中的函数是一种对象类型，即是说可以当作对象来使用函数，相比其他对象类型，函数多了能被调用执行的功能。&lt;/p&gt;
&lt;p&gt;函数和其他对象的使用对比：&lt;/p&gt;
&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;19&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;20&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;21&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;22&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;23&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;24&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;25&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;26&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;27&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;28&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;29&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 赋值声明&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; obj = &amp;#123;&amp;#125;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; func = &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;&amp;#123;&amp;#125;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 可添加属性&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;obj.name = &lt;span class=&quot;string&quot;&gt;&#39;Test&#39;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;func.name = &lt;span class=&quot;string&quot;&gt;&#39;Test&#39;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 作为数组元素或对象属性值&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; testArr = [];&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;testArr.push(&amp;#123;&amp;#125;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;testArr.push(&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;&amp;#123;&amp;#125;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; testObj = &amp;#123;&amp;#125;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;testObj.item1 = &amp;#123;&amp;#125;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;testObj.item2 = &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;&amp;#123;&amp;#125;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 作为函数参数&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;testFunc1&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;arg&lt;/span&gt;) &lt;/span&gt;&amp;#123;&amp;#125;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;testFunc1(&amp;#123;&amp;#125;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;testFunc1(&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;&amp;#123;&amp;#125;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 作为函数返回值&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;testFunc2&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &amp;#123;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;testFunc3&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;&amp;#123;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="Front-End" scheme="http://snowgan.com/categories/Front-End/"/>
    
      <category term="JavaScript" scheme="http://snowgan.com/categories/Front-End/JavaScript/"/>
    
    
      <category term="JavaScript" scheme="http://snowgan.com/tags/JavaScript/"/>
    
      <category term="Function" scheme="http://snowgan.com/tags/Function/"/>
    
  </entry>
  
  <entry>
    <title>JavaScript数组笔记</title>
    <link href="http://snowgan.com/2016/12/02/JavaScript%E6%95%B0%E7%BB%84%E7%AC%94%E8%AE%B0/"/>
    <id>http://snowgan.com/2016/12/02/JavaScript数组笔记/</id>
    <published>2016-12-02T08:02:45.000Z</published>
    <updated>2017-01-11T16:46:15.000Z</updated>
    
    <content type="html"><![CDATA[<p>数组的每一项可以保存任意类型的数据</p>
<h3 id="1-数组创建"><a href="#1-数组创建" class="headerlink" title="1. 数组创建"></a>1. 数组创建</h3><p>创建数组有两种方式（多使用第二种方式）：</p>
<ol>
<li><p>使用Array构造函数</p>
<p><code>var arr1 = new Array( &quot;hello&quot;, &quot;world&quot; );</code></p>
</li>
<li><p>使用字面量形式[]</p>
<p><code>var arr2 = [ &quot;hello&quot;, &quot;world&quot; ];</code></p>
</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 数组类型判断（若Array的toString方法被重写，则不适用）：</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">isArray</span>(<span class="params">obj</span>)</span>&#123;</div><div class="line">	<span class="keyword">return</span> <span class="built_in">Object</span>.prototype.toString.call(obj) === <span class="string">'[object Array]'</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="2-常用属性和方法"><a href="#2-常用属性和方法" class="headerlink" title="2. 常用属性和方法"></a>2. 常用属性和方法</h3><h4 id="2-1-length"><a href="#2-1-length" class="headerlink" title="2.1 .length"></a>2.1 .length</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Length of an array</span></div><div class="line"><span class="keyword">var</span> myArray = [ <span class="string">"hello"</span>, <span class="string">"world"</span>, <span class="string">"!"</span> ];</div><div class="line"><span class="built_in">console</span>.log( myArray.length ); <span class="comment">// 3</span></div><div class="line"><span class="comment">// Empty array</span></div><div class="line">myArray.length = <span class="number">0</span>;</div><div class="line"><span class="built_in">console</span>.log( myArray ); <span class="comment">// myArray =&gt; []</span></div><div class="line"><span class="comment">// truncate array</span></div><div class="line">myArray.length = <span class="number">2</span>;</div><div class="line"><span class="built_in">console</span>.log( myArray ); <span class="comment">// myArray =&gt; [ "hello", "world"]</span></div><div class="line">myArray.length = <span class="number">4</span>;</div><div class="line"><span class="built_in">console</span>.log( myArray ); <span class="comment">// myArray =&gt; [ "hello", "world", "!", undefined]</span></div></pre></td></tr></table></figure>
<h4 id="2-2-concat"><a href="#2-2-concat" class="headerlink" title="2.2 .concat()"></a>2.2 .concat()</h4><p>连接两个数组</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> myArray = [ <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span> ];</div><div class="line"><span class="keyword">var</span> myOtherArray = [ <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span> ];</div><div class="line"><span class="keyword">var</span> wholeArray = myArray.concat( myOtherArray ); <span class="comment">// [ 2, 3, 4, 5, 6, 7 ]</span></div></pre></td></tr></table></figure>
<a id="more"></a>
<h4 id="2-3-join"><a href="#2-3-join" class="headerlink" title="2.3 .join()"></a>2.3 .join()</h4><p>连接数组内的各个元素，可指定分隔符</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Joining elements</span></div><div class="line"><span class="keyword">var</span> myArray = [ <span class="string">"hello"</span>, <span class="string">"world"</span>, <span class="string">"!"</span> ];</div><div class="line"><span class="comment">// The default separator is a comma.</span></div><div class="line"><span class="built_in">console</span>.log( myArray.join() ); <span class="comment">// "hello,world,!"</span></div><div class="line"><span class="comment">// Any string can be used as separator...</span></div><div class="line"><span class="built_in">console</span>.log( myArray.join( <span class="string">" "</span> ) ); <span class="comment">// "hello world !";</span></div><div class="line"><span class="built_in">console</span>.log( myArray.join( <span class="string">"!!"</span> ) ); <span class="comment">// "hello!!world!!!";</span></div><div class="line"><span class="comment">// ...including an empty one.</span></div><div class="line"><span class="built_in">console</span>.log( myArray.join( <span class="string">""</span> ) ); <span class="comment">// "helloworld!"</span></div></pre></td></tr></table></figure>
<h4 id="2-4-push-amp-pop"><a href="#2-4-push-amp-pop" class="headerlink" title="2.4 .push() &amp; .pop()"></a>2.4 .push() &amp; .pop()</h4><p>在数组尾部添加或删除元素</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Pushing and popping</span></div><div class="line"><span class="keyword">var</span> myArray = [];</div><div class="line">myArray.push( <span class="number">0</span> ); <span class="comment">// [ 0 ]</span></div><div class="line">myArray.push( <span class="number">2</span> ); <span class="comment">// [ 0 , 2 ]</span></div><div class="line">myArray.push( <span class="number">7</span> ); <span class="comment">// [ 0 , 2 , 7 ]</span></div><div class="line">myArray.pop(); <span class="comment">// [ 0 , 2 ]</span></div></pre></td></tr></table></figure>
<h4 id="2-5-unshift-amp-shift"><a href="#2-5-unshift-amp-shift" class="headerlink" title="2.5 .unshift() &amp; .shift()"></a>2.5 .unshift() &amp; .shift()</h4><p>在数组头部添加或删除元素</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> myArray = [];</div><div class="line">myArray.unshift( <span class="number">0</span> ); <span class="comment">// [ 0 ]</span></div><div class="line">myArray.unshift( <span class="number">2</span> ); <span class="comment">// [ 2 , 0 ]</span></div><div class="line">myArray.unshift( <span class="number">7</span> ); <span class="comment">// [ 7 , 2 , 0 ]</span></div><div class="line">myArray.shift(); <span class="comment">// [ 2, 0 ]</span></div></pre></td></tr></table></figure>
<h4 id="2-6-reverse"><a href="#2-6-reverse" class="headerlink" title="2.6 .reverse()"></a>2.6 .reverse()</h4><p>使数组元素倒序</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> myArray = [ <span class="string">"world"</span> , <span class="string">"hello"</span> ];</div><div class="line">myArray.reverse(); <span class="comment">// [ "hello", "world" ]</span></div></pre></td></tr></table></figure>
<h4 id="2-7-indexOf-amp-lastIndexOf"><a href="#2-7-indexOf-amp-lastIndexOf" class="headerlink" title="2.7 .indexOf() &amp; .lastIndexOf()"></a>2.7 .indexOf() &amp; .lastIndexOf()</h4><p>搜索指定值在数组中的位置，没找到返回-1. lastIndexOf()从后往前搜索</p>
<p>传入两个参数：</p>
<p>value: 要搜索的值</p>
<p>index: 开始搜索位置</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> myArray = [ <span class="string">"world"</span> , <span class="string">"hello"</span> , <span class="string">"!"</span> , <span class="string">"world"</span> , <span class="string">"hello"</span>, <span class="string">"!"</span>];</div><div class="line"><span class="built_in">console</span>.log(myArray.indexOf(<span class="string">"!"</span>)); <span class="comment">//2</span></div><div class="line"><span class="built_in">console</span>.log(myArray.indexOf(<span class="string">"!"</span>, <span class="number">3</span>)); <span class="comment">//5</span></div><div class="line"><span class="built_in">console</span>.log(myArray.lastIndexOf(<span class="string">"!"</span>, <span class="number">3</span>)); <span class="comment">//2</span></div><div class="line"><span class="built_in">console</span>.log(myArray.lastIndexOf(<span class="string">"!"</span>, <span class="number">1</span>)); <span class="comment">//-1</span></div></pre></td></tr></table></figure>
<h4 id="2-8-slice"><a href="#2-8-slice" class="headerlink" title="2.8 .slice()"></a>2.8 .slice()</h4><p><code>slice([begin[, end]])</code></p>
<p>返回一个从begin开始到end结束但不包括end位置的新数组，begin和end可为负数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> myArray = [ <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span> ];</div><div class="line"><span class="keyword">var</span> newArray = myArray.slice( <span class="number">3</span> );</div><div class="line"><span class="built_in">console</span>.log( myArray ); <span class="comment">// [ 1, 2, 3, 4, 5, 6, 7, 8 ]</span></div><div class="line"><span class="built_in">console</span>.log( newArray ); <span class="comment">// [ 4, 5, 6, 7, 8 ]</span></div><div class="line">newArray = myArray.slice( <span class="number">-3</span> );</div><div class="line"><span class="built_in">console</span>.log( newArray ); <span class="comment">// [ 6, 7, 8 ]</span></div><div class="line">newArray = myArray.slice( <span class="number">2</span>, <span class="number">-3</span> );</div><div class="line"><span class="built_in">console</span>.log( newArray ); <span class="comment">// [ 3, 4, 5 ]</span></div><div class="line">newArray = myArray.slice( <span class="number">5</span>, <span class="number">-3</span> );</div><div class="line"><span class="built_in">console</span>.log( newArray ); <span class="comment">// []</span></div></pre></td></tr></table></figure>
<h4 id="2-9-splice"><a href="#2-9-splice" class="headerlink" title="2.9 .splice()"></a>2.9 .splice()</h4><p><code>myArray.splice( index, length, values, ... )</code></p>
<p>index: 开始位置</p>
<p>length: 删除元素个数</p>
<p>values: 添加元素，插入到index指定的位置</p>
<p>该函数返回被删除的元素</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> myArray = [ <span class="number">0</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">5</span> ];</div><div class="line"><span class="keyword">var</span> res = myArray.splice( <span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span> );</div><div class="line"><span class="built_in">console</span>.log( myArray ); <span class="comment">// [ 0, 1, 2, 3, 4, 5 ]</span></div><div class="line"><span class="built_in">console</span>.log( res ); <span class="comment">// [7, 8]</span></div></pre></td></tr></table></figure>
<h4 id="2-10-sort"><a href="#2-10-sort" class="headerlink" title="2.10 .sort()"></a>2.10 .sort()</h4><p>数组排序，默认升序排列。可传入一个函数参数，该函数定义了排序规则</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> myArray = [ <span class="number">3</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">1</span> ];</div><div class="line">myArray.sort(); <span class="comment">// 1, 3, 4, 6</span></div><div class="line"></div><div class="line"><span class="comment">// Sorting with comparing function.</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">descending</span>(<span class="params"> a, b </span>) </span>&#123;</div><div class="line">	<span class="keyword">return</span> b - a;  <span class="comment">// 如果a应排在b前，则返回负数，反之则返回正数</span></div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> myArray = [ <span class="number">3</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">1</span> ];</div><div class="line">myArray.sort( descending ); <span class="comment">// [ 6, 4, 3, 1 ]</span></div></pre></td></tr></table></figure>
<h4 id="2-11-迭代方法"><a href="#2-11-迭代方法" class="headerlink" title="2.11 迭代方法"></a>2.11 迭代方法</h4><p><code>.every(function(value[, index, array]) {})</code></p>
<p>对数组中的每一项运行指定函数，如果该函数对每一项都返回true，则every()返回true</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">isBigEnough</span>(<span class="params">element, index, array</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> element &gt;= <span class="number">10</span>;</div><div class="line">&#125;</div><div class="line">[<span class="number">12</span>, <span class="number">5</span>, <span class="number">8</span>, <span class="number">130</span>, <span class="number">44</span>].every(isBigEnough);   <span class="comment">// false</span></div><div class="line">[<span class="number">12</span>, <span class="number">54</span>, <span class="number">18</span>, <span class="number">130</span>, <span class="number">44</span>].every(isBigEnough); <span class="comment">// true</span></div></pre></td></tr></table></figure>
<p><code>.some(function(value[, index, array]) {})</code></p>
<p>对数组中的每一项运行指定函数，如果该函数对任何一项返回true，则some()返回true</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">isBiggerThan10</span>(<span class="params">element, index, array</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> element &gt; <span class="number">10</span>;</div><div class="line">&#125;</div><div class="line">[<span class="number">2</span>, <span class="number">5</span>, <span class="number">8</span>, <span class="number">1</span>, <span class="number">4</span>].some(isBiggerThan10);  <span class="comment">// false</span></div><div class="line">[<span class="number">12</span>, <span class="number">5</span>, <span class="number">8</span>, <span class="number">1</span>, <span class="number">4</span>].some(isBiggerThan10); <span class="comment">// true</span></div></pre></td></tr></table></figure>
<p><code>.forEach(function(value[, index, array]) {})</code></p>
<p>对数组中的每一项运行指定函数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">logArrayElements</span>(<span class="params">element, index, array</span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'a['</span> + index + <span class="string">'] = '</span> + element);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// Notice that index 2 is skipped since there is no item at</span></div><div class="line"><span class="comment">// that position in the array.</span></div><div class="line">[<span class="number">2</span>, <span class="number">5</span>, , <span class="number">9</span>].forEach(logArrayElements);</div><div class="line"><span class="comment">// logs:</span></div><div class="line"><span class="comment">// a[0] = 2</span></div><div class="line"><span class="comment">// a[1] = 5</span></div><div class="line"><span class="comment">// a[3] = 9</span></div><div class="line"></div><div class="line"><span class="comment">// 如果在迭代过程中改变了数组，将影响接下来的迭代数据</span></div><div class="line"><span class="keyword">var</span> words = [<span class="string">"one"</span>, <span class="string">"two"</span>, <span class="string">"three"</span>, <span class="string">"four"</span>];</div><div class="line">words.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">word</span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(word);</div><div class="line">  <span class="keyword">if</span> (word === <span class="string">"two"</span>) &#123;</div><div class="line">    words.shift();</div><div class="line">  &#125;</div><div class="line">&#125;);</div><div class="line"><span class="comment">// one</span></div><div class="line"><span class="comment">// two</span></div><div class="line"><span class="comment">// four</span></div></pre></td></tr></table></figure>
<p><code>.map(function(value[, index, array]) {})</code></p>
<p>对数组中的每一项运行指定函数, 返回每次函数调用的结果所组成的新数组</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> numbers = [<span class="number">1</span>, <span class="number">4</span>, <span class="number">9</span>];</div><div class="line"><span class="keyword">var</span> doubles = numbers.map(<span class="function"><span class="keyword">function</span>(<span class="params">num</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> num * <span class="number">2</span>;</div><div class="line">&#125;);</div><div class="line"><span class="comment">// doubles is now [2, 8, 18]. numbers is still [1, 4, 9]</span></div></pre></td></tr></table></figure>
<p><code>.filter(function(value[, index, array]) {})</code></p>
<p>对数组中的每一项运行指定函数, 返回函数调用返回true的项所组成的新函数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">isBigEnough</span>(<span class="params">value</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> value &gt;= <span class="number">10</span>;</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> filtered = [<span class="number">12</span>, <span class="number">5</span>, <span class="number">8</span>, <span class="number">130</span>, <span class="number">44</span>].filter(isBigEnough);</div><div class="line"><span class="comment">// filtered is [12, 130, 44]</span></div></pre></td></tr></table></figure>
<p><code>.reduce(function(previousValue, currentValue, currentIndex, array) {}[, initValue])</code></p>
<p>对数组中的每一项运行指定函数，previousValue是上一次调用函数的结果，reduce()返回最后一次调用函数的结果</p>
<p>reduce在数组为空且没有定义initialValue时，会抛出错误</p>
<p>reduce在数组只有一个元素且没有定义initialValue时，将不会执行指定函数，直接返回该元素</p>
<p>reduce在数组为空且定义initialValue时，将不会执行指定函数，直接返回initialValue</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> flattened = [[<span class="number">0</span>, <span class="number">1</span>], [<span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">5</span>]].reduce(<span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> a.concat(b);</div><div class="line">&#125;, []);</div><div class="line"><span class="comment">// flattened is [0, 1, 2, 3, 4, 5]</span></div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;数组的每一项可以保存任意类型的数据&lt;/p&gt;
&lt;h3 id=&quot;1-数组创建&quot;&gt;&lt;a href=&quot;#1-数组创建&quot; class=&quot;headerlink&quot; title=&quot;1. 数组创建&quot;&gt;&lt;/a&gt;1. 数组创建&lt;/h3&gt;&lt;p&gt;创建数组有两种方式（多使用第二种方式）：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;使用Array构造函数&lt;/p&gt;
&lt;p&gt;&lt;code&gt;var arr1 = new Array( &amp;quot;hello&amp;quot;, &amp;quot;world&amp;quot; );&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;使用字面量形式[]&lt;/p&gt;
&lt;p&gt;&lt;code&gt;var arr2 = [ &amp;quot;hello&amp;quot;, &amp;quot;world&amp;quot; ];&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 数组类型判断（若Array的toString方法被重写，则不适用）：&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;isArray&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;obj&lt;/span&gt;)&lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;Object&lt;/span&gt;.prototype.toString.call(obj) === &lt;span class=&quot;string&quot;&gt;&#39;[object Array]&#39;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;2-常用属性和方法&quot;&gt;&lt;a href=&quot;#2-常用属性和方法&quot; class=&quot;headerlink&quot; title=&quot;2. 常用属性和方法&quot;&gt;&lt;/a&gt;2. 常用属性和方法&lt;/h3&gt;&lt;h4 id=&quot;2-1-length&quot;&gt;&lt;a href=&quot;#2-1-length&quot; class=&quot;headerlink&quot; title=&quot;2.1 .length&quot;&gt;&lt;/a&gt;2.1 .length&lt;/h4&gt;&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// Length of an array&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; myArray = [ &lt;span class=&quot;string&quot;&gt;&quot;hello&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;world&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;!&quot;&lt;/span&gt; ];&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.log( myArray.length ); &lt;span class=&quot;comment&quot;&gt;// 3&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// Empty array&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;myArray.length = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.log( myArray ); &lt;span class=&quot;comment&quot;&gt;// myArray =&amp;gt; []&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// truncate array&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;myArray.length = &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.log( myArray ); &lt;span class=&quot;comment&quot;&gt;// myArray =&amp;gt; [ &quot;hello&quot;, &quot;world&quot;]&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;myArray.length = &lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.log( myArray ); &lt;span class=&quot;comment&quot;&gt;// myArray =&amp;gt; [ &quot;hello&quot;, &quot;world&quot;, &quot;!&quot;, undefined]&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;2-2-concat&quot;&gt;&lt;a href=&quot;#2-2-concat&quot; class=&quot;headerlink&quot; title=&quot;2.2 .concat()&quot;&gt;&lt;/a&gt;2.2 .concat()&lt;/h4&gt;&lt;p&gt;连接两个数组&lt;/p&gt;
&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; myArray = [ &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;4&lt;/span&gt; ];&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; myOtherArray = [ &lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;6&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;7&lt;/span&gt; ];&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; wholeArray = myArray.concat( myOtherArray ); &lt;span class=&quot;comment&quot;&gt;// [ 2, 3, 4, 5, 6, 7 ]&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="Front-End" scheme="http://snowgan.com/categories/Front-End/"/>
    
      <category term="JavaScript" scheme="http://snowgan.com/categories/Front-End/JavaScript/"/>
    
    
      <category term="JavaScript" scheme="http://snowgan.com/tags/JavaScript/"/>
    
      <category term="Array" scheme="http://snowgan.com/tags/Array/"/>
    
  </entry>
  
  <entry>
    <title>CSS模糊效果实践</title>
    <link href="http://snowgan.com/2016/12/01/CSS%E6%A8%A1%E7%B3%8A%E6%95%88%E6%9E%9C%E5%AE%9E%E8%B7%B5/"/>
    <id>http://snowgan.com/2016/12/01/CSS模糊效果实践/</id>
    <published>2016-12-01T02:47:51.000Z</published>
    <updated>2016-12-19T07:48:37.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="初始状态"><a href="#初始状态" class="headerlink" title="初始状态"></a>初始状态</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- html --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"bgimg"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"blur"</span>&gt;</span>模糊效果测试<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- css --&gt;</span></div><div class="line">.bgimg&#123;</div><div class="line">    height: 500px;</div><div class="line">    background-image: url(bgpic6.jpg);</div><div class="line">    background-size: contain;</div><div class="line">    background-repeat: no-repeat;</div><div class="line">    overflow: hidden;</div><div class="line">&#125;</div><div class="line">.blur &#123;</div><div class="line">    width: 200px;</div><div class="line">    height: 200px;</div><div class="line">    margin: 150px 250px;</div><div class="line">    background-color: hsla(0,0%,100%,.4);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><img src="/image/CSS模糊效果实践/001.png" alt="blur_test1"></p>
<p>这里使用hsla颜色值加透明度显示一个文字层的效果，但是并没有达到模糊的效果</p>
<a id="more"></a>
<h3 id="加入遮罩层"><a href="#加入遮罩层" class="headerlink" title="加入遮罩层"></a>加入遮罩层</h3><p>需要在文字层下方新建一个模糊层遮罩，可以在.blur元素里添加一个子元素，也可以直接添加一个伪元素</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.blur</span> &#123;</div><div class="line">    <span class="attribute">width</span>: <span class="number">200px</span>;</div><div class="line">    <span class="attribute">height</span>: <span class="number">200px</span>;</div><div class="line">    <span class="attribute">margin</span>: <span class="number">150px</span> <span class="number">250px</span>;</div><div class="line">    <span class="attribute">positon</span>: relative;</div><div class="line">    <span class="attribute">z-index</span>: <span class="number">0</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-class">.blur</span><span class="selector-pseudo">:after</span> &#123;</div><div class="line">    <span class="attribute">content</span>: <span class="string">''</span>;</div><div class="line">    <span class="attribute">position</span>: absolute;</div><div class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</div><div class="line">    <span class="attribute">bottom</span>: <span class="number">0</span>;</div><div class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</div><div class="line">    <span class="attribute">right</span>: <span class="number">0</span>;</div><div class="line">    <span class="attribute">z-index</span>: -<span class="number">1</span>;</div><div class="line">    <span class="attribute">background-color</span>: yellow;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><img src="/image/CSS模糊效果实践/002.png" alt="blur_test2"></p>
<p>如果在.blur:after上不设置z-index，after伪元素会遮住文字</p>
<p>z-index为负值时，会将该元素设置在第一个有定位(position非static)且设置了z-index值得父元素上，这里我们设置.blur元素为<code>position: relative; z-index: 0</code>，所以.blur:after伪元素会位于.blur元素上，text文字下，且会遮盖设置在.blur元素上的任何背景</p>
<p>如果换在.bgimg元素上设置，则.blur:after伪元素位于.bgimg元素上，.blur元素下，这时如果我们给.blur元素设置一个背景色，会发现.blur:after伪元素被完全遮盖了</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.bgimg</span> &#123;</div><div class="line">    <span class="attribute">positon</span>: relative;</div><div class="line">    <span class="attribute">z-index</span>: <span class="number">0</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-class">.blur</span> &#123;</div><div class="line">    <span class="comment">/* positon: relative; */</span></div><div class="line">    <span class="comment">/* z-index: 0; */</span></div><div class="line">    <span class="attribute">background-color</span>: wheat;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><img src="/image/CSS模糊效果实践/003.png" alt="blur_test3"></p>
<h3 id="遮罩层添加背景图"><a href="#遮罩层添加背景图" class="headerlink" title="遮罩层添加背景图"></a>遮罩层添加背景图</h3><p>使用<strong>background-attachment</strong>属性的fixed值，使背景图层和遮罩层的图片完全重合。background-attachment用来设置背景图的位置是固定在视图窗口上，还是跟随元素一起滚动</p>
<p>这里设置了一个border值来突出.blur元素</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.bgimg</span>&#123;</div><div class="line">    <span class="attribute">height</span>: <span class="number">500px</span>;</div><div class="line">    <span class="attribute">background-image</span>: <span class="built_in">url</span>(bgpic6.jpg);</div><div class="line">    <span class="attribute">background-size</span>: contain;</div><div class="line">    <span class="attribute">background-repeat</span>: no-repeat;</div><div class="line">    <span class="attribute">background-attachment</span>: fixed;</div><div class="line">    <span class="attribute">overflow</span>: hidden;</div><div class="line">&#125;</div><div class="line"><span class="selector-class">.blur</span><span class="selector-pseudo">:after</span> &#123;</div><div class="line">    <span class="attribute">content</span>: <span class="string">''</span>;</div><div class="line">    <span class="attribute">position</span>: absolute;</div><div class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</div><div class="line">    <span class="attribute">bottom</span>: <span class="number">0</span>;</div><div class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</div><div class="line">    <span class="attribute">right</span>: <span class="number">0</span>;</div><div class="line">    <span class="attribute">z-index</span>: -<span class="number">1</span>;</div><div class="line">    <span class="attribute">background-image</span>: <span class="built_in">url</span>(bgpic6.jpg);</div><div class="line">    <span class="attribute">background-size</span>: contain;</div><div class="line">    <span class="attribute">background-repeat</span>: no-repeat;</div><div class="line">    <span class="attribute">background-attachment</span>: fixed;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><img src="/image/CSS模糊效果实践/004.png" alt="blur_test4"></p>
<h3 id="使用filter-blur-实现模糊效果"><a href="#使用filter-blur-实现模糊效果" class="headerlink" title="使用filter: blur()实现模糊效果"></a>使用filter: blur()实现模糊效果</h3><p><code>filter: blur(5px)</code>指定一个模糊半径，可以非常方便地实现模糊效果。但只能在高级浏览器下使用，IE不兼容</p>
<p>该模糊效果会在边缘弱化，所以设置遮罩层的margin为负值使其size大于.blur元素，再在.blur元素上设置<code>overflow: hidden</code>切掉超出部分，可得到一个理想的模糊效果</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.blur</span> &#123;</div><div class="line">    <span class="attribute">overflow</span>: hidden;</div><div class="line">&#125;</div><div class="line"><span class="selector-class">.blur</span><span class="selector-pseudo">:after</span> &#123;</div><div class="line">    <span class="attribute">filter</span>: <span class="built_in">blur</span>(5px);</div><div class="line">    <span class="attribute">margin</span>: -<span class="number">10px</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><img src="/image/CSS模糊效果实践/005.png" alt="blur_test5"></p>
<h3 id="完整代码"><a href="#完整代码" class="headerlink" title="完整代码"></a>完整代码</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- html --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"bgimg"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"blur"</span>&gt;</span>模糊效果测试<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- css --&gt;</span></div><div class="line">.bgimg&#123;</div><div class="line">    height: 500px;</div><div class="line">    background-image: url(bgpic6.jpg);</div><div class="line">    background-size: contain;</div><div class="line">    background-repeat: no-repeat;</div><div class="line">    background-attachment: fixed;</div><div class="line">    overflow: hidden;</div><div class="line">&#125;</div><div class="line">.blur &#123;</div><div class="line">    width: 200px;</div><div class="line">    height: 200px;</div><div class="line">    margin: 150px 250px;</div><div class="line">    position: relative;</div><div class="line">    z-index: 2;</div><div class="line">    overflow: hidden;</div><div class="line">&#125;</div><div class="line">.blur:after &#123;</div><div class="line">    content: '';</div><div class="line">    position: absolute;</div><div class="line">    top: 0;</div><div class="line">    bottom: 0;</div><div class="line">    left: 0;</div><div class="line">    right: 0;</div><div class="line">    z-index: -1;</div><div class="line">    background-image: url(bgpic6.jpg);</div><div class="line">    background-size: contain;</div><div class="line">    background-repeat: no-repeat;</div><div class="line">    background-attachment: fixed;</div><div class="line">    filter: blur(5px);</div><div class="line">    margin: -10px;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<p>参考文章：</p>
<ol>
<li><a href="http://www.w3cplus.com/css3/css-secrets/frosted-glass-effect.html" target="_blank" rel="external">CSS秘密花园:磨砂玻璃效果</a></li>
<li><a href="http://www.zhangxinxu.com/wordpress/2012/03/zindex%E8%B4%9F%E5%80%BC-%E7%BB%9D%E5%AF%B9%E5%AE%9A%E4%BD%8D-%E6%96%87%E5%AD%97%E9%9A%90%E8%97%8F/" target="_blank" rel="external">你到了第几层？图片式标题、按钮与隐藏文本</a></li>
</ol>
]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;初始状态&quot;&gt;&lt;a href=&quot;#初始状态&quot; class=&quot;headerlink&quot; title=&quot;初始状态&quot;&gt;&lt;/a&gt;初始状态&lt;/h3&gt;&lt;figure class=&quot;highlight html&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;19&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;&amp;lt;!-- html --&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;div&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;class&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;bgimg&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;div&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;class&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;blur&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;模糊效果测试&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;div&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;div&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;&amp;lt;!-- css --&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;.bgimg&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    height: 500px;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    background-image: url(bgpic6.jpg);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    background-size: contain;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    background-repeat: no-repeat;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    overflow: hidden;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;.blur &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    width: 200px;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    height: 200px;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    margin: 150px 250px;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    background-color: hsla(0,0%,100%,.4);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;img src=&quot;/image/CSS模糊效果实践/001.png&quot; alt=&quot;blur_test1&quot;&gt;&lt;/p&gt;
&lt;p&gt;这里使用hsla颜色值加透明度显示一个文字层的效果，但是并没有达到模糊的效果&lt;/p&gt;
    
    </summary>
    
      <category term="Front-End" scheme="http://snowgan.com/categories/Front-End/"/>
    
      <category term="CSS" scheme="http://snowgan.com/categories/Front-End/CSS/"/>
    
    
      <category term="CSS" scheme="http://snowgan.com/tags/CSS/"/>
    
  </entry>
  
  <entry>
    <title>JavaScript基本类型</title>
    <link href="http://snowgan.com/2016/11/21/JavaScript%E5%9F%BA%E6%9C%AC%E7%B1%BB%E5%9E%8B/"/>
    <id>http://snowgan.com/2016/11/21/JavaScript基本类型/</id>
    <published>2016-11-21T14:25:13.000Z</published>
    <updated>2017-01-30T06:43:19.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="1-变量和常量"><a href="#1-变量和常量" class="headerlink" title="1. 变量和常量"></a>1. 变量和常量</h3><p>JavaScript中的数据存储类型分为变量和常量（常量是es6新引入的），常量在声明初始化后就不能改变其值，变量则可任意改变。代码中尽可能使用常量以避免意外改变了值，除非业务逻辑明确需要一个变量</p>
<p>变量声明关键字： <strong>var</strong>, <strong>let(es6块级作用域申明)</strong></p>
<p>常量声明关键字： <strong>const(es6)</strong></p>
<blockquote>
<p>作为一种代码规范（而非必须），常量名使用大写字母和下划线组合</p>
</blockquote>
<h3 id="2-数据类型"><a href="#2-数据类型" class="headerlink" title="2. 数据类型"></a>2. 数据类型</h3><p>JavaScript中的数据类型分为原生类型（primitive）和对象类型（object）</p>
<p>原生类型是不可变的，有六种类型：</p>
<ul>
<li>Undefined（唯一值undefined）</li>
<li>Null（唯一值null）</li>
<li>Number</li>
<li>String</li>
<li>Boolean</li>
<li>Symbol（es6）</li>
</ul>
<a id="more"></a>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> a;   <span class="comment">// undefined: 只申明未赋值，会默认设为undefined</span></div><div class="line">a = <span class="literal">null</span> <span class="comment">// null: 用来表示数据未知或不可用</span></div><div class="line"></div><div class="line"><span class="comment">// 使用typeof操作符可返回操作数的类型字符串</span></div><div class="line"><span class="keyword">typeof</span> operand</div></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th style="text-align:left">类型</th>
<th style="text-align:left">使用typeof操作符结果</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Undefined</td>
<td style="text-align:left"><code>&quot;undefined&quot;</code></td>
</tr>
<tr>
<td style="text-align:left">Null</td>
<td style="text-align:left"><code>&quot;object&quot;</code></td>
</tr>
<tr>
<td style="text-align:left">Boolean</td>
<td style="text-align:left"><code>&quot;boolean&quot;</code></td>
</tr>
<tr>
<td style="text-align:left">Number</td>
<td style="text-align:left"><code>&quot;number&quot;</code></td>
</tr>
<tr>
<td style="text-align:left">String</td>
<td style="text-align:left"><code>&quot;string&quot;</code></td>
</tr>
<tr>
<td style="text-align:left">Symbol</td>
<td style="text-align:left"><code>&quot;symbol&quot;</code></td>
</tr>
<tr>
<td style="text-align:left">函数对象</td>
<td style="text-align:left"><code>&quot;function&quot;</code></td>
</tr>
<tr>
<td style="text-align:left">任何其他对象</td>
<td style="text-align:left"><code>&quot;object&quot;</code></td>
</tr>
</tbody>
</table>
<p>原生的number、string、boolean都有对应的对象类型Number、String、Boolean，这些对象提供了一些方便的内置方法，原生类型也可以调用这些对象上的方法，其原理是：在调用方法时临时生成对应的对象类型，该对象正常调用方法，调用结束后立即舍弃临时对象</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> s = <span class="string">'abc'</span>;</div><div class="line">s.toUpperCase()  <span class="comment">// 'ABC'</span></div><div class="line"></div><div class="line"><span class="comment">// 实际执行逻辑大概如下</span></div><div class="line"><span class="keyword">const</span> tmpS = <span class="keyword">new</span> <span class="built_in">String</span>(s);</div><div class="line">tmpS.toUpperCase();</div><div class="line">tmpS = <span class="literal">undefined</span>;</div></pre></td></tr></table></figure>
<p>JS也提供了其他常用的内置对象：</p>
<ul>
<li>Array</li>
<li>Date</li>
<li>RegExp</li>
<li>Math</li>
</ul>
<h4 id="2-1-Number"><a href="#2-1-Number" class="headerlink" title="2.1 Number"></a>2.1 Number</h4><p>JS中的number类型都是按64位浮点数方式存储，能够表示的整数范围是-2^53~2^53（包含边界值）</p>
<p>从表现形式来看有<strong>十进制</strong>（整数，小数，科学计数法e），<strong>二进制</strong>，<strong>八进制</strong>（0o开头），<strong>十六进制</strong>（0x开头），<strong>NaN</strong>（非数字），<strong>Infinity</strong>（无穷大），<strong>-Infinity</strong>（负无穷大）</p>
<p>在JS的数字运算中，溢出、下溢、被0整除时不会报错。结果溢出时用Infinity来表示结果。结果为非数字值时用NaN表示</p>
<p>NaN是一个特殊的数值，表示在本该返回数值的操作中没有返回数值的情况。与任何值都不相等，包括NaN本身</p>
<p>Number对象上还定义了一些边界数字：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">Number</span>.MAX_SAFE_INTEGER  <span class="comment">// 最大整数</span></div><div class="line"><span class="built_in">Number</span>.MIN_SAFE_INTEGER  <span class="comment">// 最小整数</span></div><div class="line"><span class="built_in">Number</span>.MAX_VALUE  <span class="comment">// 最大数2^53</span></div><div class="line"><span class="built_in">Number</span>.MIN_VALUE  <span class="comment">// 最小数-2^53</span></div></pre></td></tr></table></figure>
<p>常用Math对象上的方法来进行数学计算：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Math对象的常用函数和常量</span></div><div class="line"><span class="built_in">Math</span>.pow(<span class="number">2</span>, <span class="number">3</span>)   <span class="comment">// 8: 2的3次幂</span></div><div class="line"><span class="built_in">Math</span>.exp(<span class="number">3</span>)      <span class="comment">// e的3次幂</span></div><div class="line"><span class="built_in">Math</span>.round(<span class="number">.6</span>)   <span class="comment">// 1: 四舍五入</span></div><div class="line"><span class="built_in">Math</span>.ceil(<span class="number">.6</span>)    <span class="comment">// 1: 向上求整</span></div><div class="line"><span class="built_in">Math</span>.floor(<span class="number">.6</span>)   <span class="comment">// 0: 向下求整</span></div><div class="line"><span class="built_in">Math</span>.abs(<span class="number">-1</span>)     <span class="comment">// 1: 求绝对值</span></div><div class="line"><span class="built_in">Math</span>.trunc(<span class="number">-5.5</span>) <span class="comment">// -5: 去掉小数部分</span></div><div class="line"><span class="built_in">Math</span>.max(x, y)   <span class="comment">// 返回最大值</span></div><div class="line"><span class="built_in">Math</span>.min(x, y)   <span class="comment">// 返回最小值</span></div><div class="line"><span class="built_in">Math</span>.random()    <span class="comment">// 生成一个[0, 1)区间的伪随机数</span></div><div class="line"><span class="built_in">Math</span>.sqrt(<span class="number">4</span>)     <span class="comment">// 2: 求平方根</span></div><div class="line"><span class="built_in">Math</span>.cbrt(<span class="number">27</span>)    <span class="comment">// 3: 求立方根</span></div><div class="line"><span class="built_in">Math</span>.PI          <span class="comment">// π</span></div><div class="line"><span class="built_in">Math</span>.E           <span class="comment">// e: 自然对数的底数</span></div><div class="line"></div><div class="line"><span class="comment">// 在给定的最小最大值之间随机取一个整数</span></div><div class="line"><span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random()*(max-min+<span class="number">1</span>))+min</div></pre></td></tr></table></figure>
<h4 id="2-2-String"><a href="#2-2-String" class="headerlink" title="2.2 String"></a>2.2 String</h4><p>模板字符串</p>
<p>在ES6之前，如果要动态生成字符串，需要这样写：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> name = <span class="string">'Snow'</span>;</div><div class="line"><span class="keyword">var</span> welcome = <span class="string">'Hello '</span> + name;</div></pre></td></tr></table></figure>
<p>但在ES6中，可以很方便地使用模板字符串实现：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> name = <span class="string">'Snow'</span>;</div><div class="line"><span class="keyword">var</span> welcome = <span class="string">`Hello <span class="subst">$&#123;name&#125;</span>`</span>;</div></pre></td></tr></table></figure>
<p>字符串常用方法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> s = <span class="string">'Hello World'</span></div><div class="line">s.length            <span class="comment">// =&gt; "11" : 字符长度</span></div><div class="line">s.charAt(<span class="number">0</span>)         <span class="comment">// =&gt; "H" : 第一个字符</span></div><div class="line">s.indexOf(<span class="string">'l'</span>)      <span class="comment">// =&gt; "2" : 字符l首次出现的索引位置</span></div><div class="line">s.indexOf(<span class="string">'l'</span>, <span class="number">5</span>)   <span class="comment">// =&gt; "9" : 字符l在索引位置5及之后首次出现的位置</span></div><div class="line">s.lastIndexOf(<span class="string">'l'</span>)  <span class="comment">// =&gt; "9" : 字符l最后一次出现的位置</span></div><div class="line">s.split(<span class="string">' '</span>)        <span class="comment">// =&gt; ["Hello", "World"] : 按传入的分隔符分割成数组</span></div><div class="line">s.replace(<span class="string">'l'</span>, <span class="string">'L'</span>) <span class="comment">// =&gt; "HeLlo World" : 字符替换</span></div><div class="line">s.toUpperCase()     <span class="comment">// =&gt; "HELLO WORLD" : 全文转换为大写</span></div><div class="line">s.toLowerCase()     <span class="comment">// =&gt; "hello world" : 全文转换为小写</span></div><div class="line">s.substr(<span class="number">1</span>, <span class="number">4</span>)      <span class="comment">// =&gt; "ello" : 从索引位置1开始，截取4个字符</span></div><div class="line">s.substr(<span class="number">-4</span>)        <span class="comment">// =&gt; "orld" : 从索引位置length-4开始截取，第一个参数可为负，第二个参数若为负则转成0</span></div><div class="line">s.substring(<span class="number">1</span>, <span class="number">4</span>)   <span class="comment">// =&gt; "ell" : 取指定索引位置之间的字符，&gt;=1且&lt;4</span></div><div class="line">s.substring(<span class="number">1</span>, <span class="number">-4</span>)  <span class="comment">// =&gt; "H" : 把所有负数参数转成0</span></div><div class="line">s.slice(<span class="number">1</span>, <span class="number">4</span>)       <span class="comment">// =&gt; "ell" : 取指定索引位置之间的字符，&gt;=1且&lt;4</span></div><div class="line">s.slice(<span class="number">1</span>, <span class="number">-4</span>)      <span class="comment">// =&gt; "ello W" : &gt;=1且&lt;length-4，所有参数均可为负</span></div><div class="line"></div><div class="line"><span class="comment">// 在不支持trim方法的情况下，可自行写一个trim函数：</span></div><div class="line"><span class="built_in">String</span>.prototype.trim = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="keyword">return</span> <span class="keyword">this</span>.replace(<span class="regexp">/^\s+|\s+$/g</span>, <span class="string">""</span>);&#125;;</div></pre></td></tr></table></figure>
<h4 id="2-3-类型转换"><a href="#2-3-类型转换" class="headerlink" title="2.3 类型转换"></a>2.3 类型转换</h4><p><strong>string转number</strong></p>
<ul>
<li>调用Number对象构造器，能转换数字则返回对应数字，不能则返回NaN</li>
<li>调用内置函数<code>parseInt(string,[ radix ])</code>或<code>parseFloat(string,[ radix ])</code>，radix指定解析进制规则，默认10</li>
<li>使用’*’运算符会默认将字符串转换为数字，若不能转换则运算结果为NaN</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> a = <span class="number">30</span> * <span class="string">'3'</span>;  <span class="comment">// 90</span></div><div class="line">a = <span class="string">'30'</span> * <span class="string">'3'</span>;    <span class="comment">// 90</span></div><div class="line">a = <span class="number">30</span> * <span class="string">'a'</span>;    <span class="comment">// NaN</span></div></pre></td></tr></table></figure>
<p><strong>number转string</strong></p>
<ul>
<li>调用对象的<code>toString()</code>方法，JS的所有对象都会有一个toString方法</li>
<li>使用’+’连接数字和字符串时，会默认将数字转换为字符串</li>
</ul>
<p><strong>转boolean</strong></p>
<ul>
<li>调用Boolean对象构造器</li>
<li>使用’!!’逻辑运算符</li>
</ul>
<p>JS中的任何值都能转换为布尔值。undefined、null、0、-0、NaN、“”(空字符串)会转换为false，其余则转换为true。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> b = <span class="string">''</span>;</div><div class="line"><span class="keyword">const</span> boo1 = <span class="built_in">Boolean</span>(b);  <span class="comment">// false</span></div><div class="line"><span class="keyword">const</span> boo2 = !!b;         <span class="comment">// false</span></div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;1-变量和常量&quot;&gt;&lt;a href=&quot;#1-变量和常量&quot; class=&quot;headerlink&quot; title=&quot;1. 变量和常量&quot;&gt;&lt;/a&gt;1. 变量和常量&lt;/h3&gt;&lt;p&gt;JavaScript中的数据存储类型分为变量和常量（常量是es6新引入的），常量在声明初始化后就不能改变其值，变量则可任意改变。代码中尽可能使用常量以避免意外改变了值，除非业务逻辑明确需要一个变量&lt;/p&gt;
&lt;p&gt;变量声明关键字： &lt;strong&gt;var&lt;/strong&gt;, &lt;strong&gt;let(es6块级作用域申明)&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;常量声明关键字： &lt;strong&gt;const(es6)&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;作为一种代码规范（而非必须），常量名使用大写字母和下划线组合&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;2-数据类型&quot;&gt;&lt;a href=&quot;#2-数据类型&quot; class=&quot;headerlink&quot; title=&quot;2. 数据类型&quot;&gt;&lt;/a&gt;2. 数据类型&lt;/h3&gt;&lt;p&gt;JavaScript中的数据类型分为原生类型（primitive）和对象类型（object）&lt;/p&gt;
&lt;p&gt;原生类型是不可变的，有六种类型：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Undefined（唯一值undefined）&lt;/li&gt;
&lt;li&gt;Null（唯一值null）&lt;/li&gt;
&lt;li&gt;Number&lt;/li&gt;
&lt;li&gt;String&lt;/li&gt;
&lt;li&gt;Boolean&lt;/li&gt;
&lt;li&gt;Symbol（es6）&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="Front-End" scheme="http://snowgan.com/categories/Front-End/"/>
    
      <category term="JavaScript" scheme="http://snowgan.com/categories/Front-End/JavaScript/"/>
    
    
      <category term="JavaScript" scheme="http://snowgan.com/tags/JavaScript/"/>
    
      <category term="Basic" scheme="http://snowgan.com/tags/Basic/"/>
    
  </entry>
  
  <entry>
    <title>Swift笔记（一） 基础知识</title>
    <link href="http://snowgan.com/2015/06/25/Swift%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/"/>
    <id>http://snowgan.com/2015/06/25/Swift笔记（一）-基础知识/</id>
    <published>2015-06-25T06:47:30.000Z</published>
    <updated>2015-06-25T09:27:07.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="简单值"><a href="#简单值" class="headerlink" title="简单值"></a>简单值</h2><p>在Swift文件中，全局作用域的代码会被自动当做程序的入口点，所以不需要main函数。<br>也不需要在每个语句结尾写上分号，除非在同一行内写多条独立的语句</p>
<p><strong>基本类型</strong>： <code>Int</code>, <code>Float</code>, <code>Double</code>, <code>Bool</code>, <code>Array</code>, <code>Dictionary</code></p>
<blockquote>
<p>关于Array和Dictionary:<br>不同于obj-C的NSAaary和NSDictionary，Swift的Array和Dictionary是基本类型而不是对象，但两者在大部分情况下是可直接互换的</p>
</blockquote>
<p><strong>声明方式</strong><br>使用let来声明常量，使用var来声明变量。  </p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> myVariable = <span class="number">42</span></div><div class="line">myVariable = <span class="number">50</span></div><div class="line"><span class="keyword">let</span> myConstant = <span class="number">42</span></div></pre></td></tr></table></figure>
<a id="more"></a>
<p>一个常量的值，在编译的时候，并不需要有明确的值，但是你只能为它赋值一次。如果一个值在后续使用中不会改变，则声明为常量，否则声明为变量。</p>
<p>Swift是一种类型安全（type safe）的语言，每个值都必须有确定的类型，但声明时类型是可选的：  </p>
<ul>
<li>如果声明的同时赋值，编译器会自动推断类型。  </li>
<li>如果初始值没有提供足够的信息（或者没有初始值），就需要在变量后面声明类型，在常量或者变量名后面加上一个冒号和空格，然后加上类型名称。  </li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> implicitInteger = <span class="number">70</span></div><div class="line"><span class="keyword">let</span> implicitDouble = <span class="number">70.0</span></div><div class="line"><span class="comment">// 自动类型推断会认定为Double类型，若要声明Float类型，需显示声明类型</span></div><div class="line"><span class="keyword">let</span> explicitDouble: <span class="type">Double</span> = <span class="number">70</span></div></pre></td></tr></table></figure>
<p>值永远不会被隐式转换为其他类型。如果你需要把一个值转换成其他类型，请显式转换。如下例子若去掉显示转换的String，则会编译报错：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> label = <span class="string">"The width is"</span></div><div class="line"><span class="keyword">let</span> width = <span class="number">94</span></div><div class="line"><span class="keyword">let</span> widthLabel = label + <span class="type">String</span>(width)</div></pre></td></tr></table></figure>
<p>有一种更简单的把值转换成字符串的方法：把值写到括号中，并且在括号之前写一个反斜杠。例如：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> apples = <span class="number">3</span></div><div class="line"><span class="keyword">let</span> oranges = <span class="number">5</span></div><div class="line"><span class="keyword">let</span> appleSummary = <span class="string">"I have \(apples) apples."</span></div><div class="line"><span class="keyword">let</span> fruitSummary = <span class="string">"I have \(apples + oranges) pieces of fruit."</span></div></pre></td></tr></table></figure>
<h2 id="控制流"><a href="#控制流" class="headerlink" title="控制流"></a>控制流</h2><p>条件判断：<code>if-else</code> 和 <code>switch</code><br>循环：<code>for-in</code>、 <code>for</code>、 <code>while</code> 和 <code>do-while</code>  </p>
<blockquote>
<p>NOTE:<br>在Swift2.0中将<code>do-while</code>改为了<code>repeat-while</code>  </p>
</blockquote>
<p>条件语句的括号是可选的，执行语句主体写在花括号内</p>
<p>if判断条件必须是一个Bool表达式，因为值不能隐式转换类型，所以如<code>if condition { … }</code>这样的写法中若condition不是一个Bool类型都会报错</p>
<p>switch中的case语句若覆盖了所有情况，则可省略default语句；<br>匹配到任一条case语句执行后会直接跳出switch，不会继续执行后续case语句，所以不需要在每条case代码后加上break。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> vegetable = <span class="string">"red pepper"</span></div><div class="line"><span class="keyword">switch</span> vegetable &#123;</div><div class="line"><span class="keyword">case</span> <span class="string">"celery"</span>:</div><div class="line">    <span class="keyword">let</span> vegetableComment = <span class="string">"Add some raisins and make ants on a log."</span></div><div class="line"><span class="keyword">case</span> <span class="string">"cucumber"</span>, <span class="string">"watercress"</span>:</div><div class="line">    <span class="keyword">let</span> vegetableComment = <span class="string">"That would make a good tea sandwich."</span></div><div class="line"><span class="keyword">case</span> <span class="keyword">let</span> x <span class="keyword">where</span> x.hasSuffix(<span class="string">"pepper"</span>):</div><div class="line">    <span class="keyword">let</span> vegetableComment = <span class="string">"Is it a spicy \(x)?"</span></div><div class="line"><span class="keyword">default</span>:</div><div class="line">    <span class="keyword">let</span> vegetableComment = <span class="string">"Everything tastes good in soup."</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="typealias"><a href="#typealias" class="headerlink" title="typealias"></a>typealias</h2><p>使用typealias关键字来定义类型别名。  </p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">typealias</span> <span class="type">AudioSample</span> = <span class="type">UInt16</span></div></pre></td></tr></table></figure>
<p>定义了一个类型别名之后，可以在任何使用原始名的地方使用别名。<br>下例中，AudioSample被定义为UInt16的一个别名。因为它是别名，AudioSample.min实际上是UInt16.min，所以会给maxAmplitudeFound赋一个初值0。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> maxAmplitudeFound = <span class="type">AudioSample</span>.<span class="built_in">min</span></div><div class="line"><span class="comment">// maxAmplitudeFound 现在是 0</span></div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;简单值&quot;&gt;&lt;a href=&quot;#简单值&quot; class=&quot;headerlink&quot; title=&quot;简单值&quot;&gt;&lt;/a&gt;简单值&lt;/h2&gt;&lt;p&gt;在Swift文件中，全局作用域的代码会被自动当做程序的入口点，所以不需要main函数。&lt;br&gt;也不需要在每个语句结尾写上分号，除非在同一行内写多条独立的语句&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;基本类型&lt;/strong&gt;： &lt;code&gt;Int&lt;/code&gt;, &lt;code&gt;Float&lt;/code&gt;, &lt;code&gt;Double&lt;/code&gt;, &lt;code&gt;Bool&lt;/code&gt;, &lt;code&gt;Array&lt;/code&gt;, &lt;code&gt;Dictionary&lt;/code&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;关于Array和Dictionary:&lt;br&gt;不同于obj-C的NSAaary和NSDictionary，Swift的Array和Dictionary是基本类型而不是对象，但两者在大部分情况下是可直接互换的&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;声明方式&lt;/strong&gt;&lt;br&gt;使用let来声明常量，使用var来声明变量。  &lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; myVariable = &lt;span class=&quot;number&quot;&gt;42&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;myVariable = &lt;span class=&quot;number&quot;&gt;50&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; myConstant = &lt;span class=&quot;number&quot;&gt;42&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="iOS" scheme="http://snowgan.com/categories/iOS/"/>
    
    
      <category term="Swift" scheme="http://snowgan.com/tags/Swift/"/>
    
      <category term="iOS" scheme="http://snowgan.com/tags/iOS/"/>
    
  </entry>
  
  <entry>
    <title>Swift KVO模式</title>
    <link href="http://snowgan.com/2015/06/25/Swift-KVO%E6%A8%A1%E5%BC%8F/"/>
    <id>http://snowgan.com/2015/06/25/Swift-KVO模式/</id>
    <published>2015-06-25T06:41:19.000Z</published>
    <updated>2015-06-25T15:34:54.000Z</updated>
    
    <content type="html"><![CDATA[<p>KVO(Key-Value Observing)是一种观察者模式。继承自NSObject的对象可以注册监听任何属性的变化，并指定观察者对象。<br>注册监听属性的方法<code>addObserver:forKeyPath:options:context:</code></p>
<blockquote>
<p>注：被监听属性要用dynamic关键字修饰</p>
</blockquote>
<p>方法声明： </p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">addObserver</span><span class="params">(<span class="number">_</span> anObserver: NSObject, //指定观察者对象</span></span></div><div class="line"><span class="function"><span class="params">           forKeyPath keyPath: String, //指定要监听的属性</span></span></div><div class="line"><span class="function"><span class="params">              options options: NSKeyValueObservingOptions, //监听选项，指定要包含在change字典里的数据</span></span></div><div class="line"><span class="function"><span class="params">              context context: UnsafeMutablePointer&lt;Void&gt; //要传递给观察者的数据，可以注册多个相同观察者，相同属性，不同context的监听事件</span></span></div><div class="line"><span class="function"><span class="params">)</span></span></div></pre></td></tr></table></figure>
<a id="more"></a>
<p>其中options参数类型NSKeyValueObservingOptions是一个结构体，包含四个属性。<br>定义： </p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">NSKeyValueObservingOptions</span> : <span class="title">RawOptionSetType</span> </span>&#123;</div><div class="line">    <span class="keyword">init</span>(<span class="number">_</span> rawValue: <span class="type">UInt</span>)</div><div class="line">    <span class="keyword">init</span>(rawValue rawValue: <span class="type">UInt</span>)</div><div class="line">    <span class="keyword">static</span> <span class="keyword">var</span> <span class="type">New</span>: <span class="type">NSKeyValueObservingOptions</span> &#123; <span class="keyword">get</span> &#125; <span class="comment">// change字典里包含新值</span></div><div class="line">    <span class="keyword">static</span> <span class="keyword">var</span> <span class="type">Old</span>: <span class="type">NSKeyValueObservingOptions</span> &#123; <span class="keyword">get</span> &#125; <span class="comment">// change字典里包含旧值</span></div><div class="line">    <span class="keyword">static</span> <span class="keyword">var</span> <span class="type">Initial</span>: <span class="type">NSKeyValueObservingOptions</span> &#123; <span class="keyword">get</span> &#125; <span class="comment">// 在注册监听的时候就会立即发送消息给观察者</span></div><div class="line">    <span class="keyword">static</span> <span class="keyword">var</span> <span class="type">Prior</span>: <span class="type">NSKeyValueObservingOptions</span> &#123; <span class="keyword">get</span> &#125; <span class="comment">// 在监听的属性变化前后各发送一次消息给观察者</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>当监听的属性发生变化时，会向观察者发送<code>observeValueForKeyPath:ofObject:change:context:</code>消息，观察者可以重写该方法以实现自定义行为。<br>方法声明：  </p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">observeValueForKeyPath</span><span class="params">(<span class="number">_</span> keyPath: String,</span></span></div><div class="line"><span class="function"><span class="params">                      ofObject object: AnyObject,</span></span></div><div class="line"><span class="function"><span class="params">                        change change: [NSObject : AnyObject],</span></span></div><div class="line"><span class="function"><span class="params">                      context context: UnsafeMutablePointer&lt;Void&gt;)</span></span></div></pre></td></tr></table></figure>
<p>观察者被释放前需要取消监听，否则消息发送给一个已销毁的对象会造成程序崩溃<br>方法声明：  </p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">removeObserver</span><span class="params">(<span class="number">_</span> anObserver: NSObject,</span></span></div><div class="line"><span class="function"><span class="params">              forKeyPath keyPath: String)</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">removeObserver</span><span class="params">(<span class="number">_</span> observer: NSObject,</span></span></div><div class="line"><span class="function"><span class="params">            forKeyPath keyPath: String,</span></span></div><div class="line"><span class="function"><span class="params">               context context: UnsafeMutablePointer&lt;Void&gt;)</span></span></div></pre></td></tr></table></figure>
<p>示例：当用户点击“Like”按钮，label的数字会相应加1，相当于一个点赞计数的功能  </p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> UIKit</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Like</span>: <span class="title">NSObject</span> </span>&#123;</div><div class="line">    <span class="keyword">dynamic</span> <span class="keyword">var</span> <span class="built_in">count</span>: <span class="type">Int</span></div><div class="line">    <span class="keyword">init</span>(<span class="built_in">count</span>: <span class="type">Int</span>) &#123;</div><div class="line">        <span class="keyword">self</span>.<span class="built_in">count</span> = <span class="built_in">count</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ViewController</span>: <span class="title">UIViewController</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> like = <span class="type">Like</span>(<span class="built_in">count</span>: <span class="number">0</span>)</div><div class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="keyword">super</span>.viewDidLoad()</div><div class="line">        <span class="comment">// 注册监听事件</span></div><div class="line">        like.addObserver(<span class="keyword">self</span>, forKeyPath: <span class="string">"count"</span>, options: <span class="literal">nil</span>, context: <span class="literal">nil</span>)</div><div class="line"></div><div class="line">        setupLabel()</div><div class="line">        setupButton()</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">setupLabel</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="keyword">let</span> label = <span class="type">UILabel</span>()</div><div class="line">        label.bounds.size = <span class="type">CGSize</span>(width: <span class="number">20</span>, height: <span class="number">20</span>)</div><div class="line">        label.tag = <span class="number">1</span></div><div class="line">        label.backgroundColor = <span class="type">UIColor</span>.yellowColor()</div><div class="line">        label.text = <span class="string">"\(like.count)"</span></div><div class="line">        label.autoresizingMask = .<span class="type">FlexibleWidth</span></div><div class="line">        view.addSubview(label)</div><div class="line">        label.setTranslatesAutoresizingMaskIntoConstraints(<span class="literal">false</span>)</div><div class="line">        view.addConstraint(<span class="type">NSLayoutConstraint</span>(item: label, attribute: .<span class="type">CenterX</span>, relatedBy: .<span class="type">Equal</span>, toItem: view, attribute: .<span class="type">CenterX</span>, multiplier: <span class="number">1</span>, constant: <span class="number">0</span>))</div><div class="line">        view.addConstraint(<span class="type">NSLayoutConstraint</span>(item: label, attribute: .<span class="type">CenterY</span>, relatedBy: .<span class="type">Equal</span>, toItem: view, attribute: .<span class="type">CenterY</span>, multiplier: <span class="number">1</span>, constant: <span class="number">0</span>))</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">setupButton</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="keyword">let</span> button = <span class="type">UIButton</span>.buttonWithType(<span class="type">UIButtonType</span>.<span class="type">System</span>) <span class="keyword">as</span>! <span class="type">UIButton</span></div><div class="line">        button.tag = <span class="number">2</span></div><div class="line">        button.setTitle(<span class="string">"Like"</span>, forState: <span class="type">UIControlState</span>.<span class="type">Normal</span>)</div><div class="line">        view.addSubview(button)</div><div class="line">        button.setTranslatesAutoresizingMaskIntoConstraints(<span class="literal">false</span>)</div><div class="line">        view.addConstraint(<span class="type">NSLayoutConstraint</span>(item: button, attribute: .<span class="type">Top</span>, relatedBy: .<span class="type">Equal</span>, toItem: view.viewWithTag(<span class="number">1</span>), attribute: .<span class="type">Bottom</span>, multiplier: <span class="number">1</span>, constant: <span class="number">10</span>))</div><div class="line">        view.addConstraint(<span class="type">NSLayoutConstraint</span>(item: button, attribute: .<span class="type">CenterX</span>, relatedBy: .<span class="type">Equal</span>, toItem: view, attribute: .<span class="type">CenterX</span>, multiplier: <span class="number">1</span>, constant: <span class="number">0</span>))</div><div class="line">        button.addTarget(<span class="keyword">self</span>, action: <span class="string">"buttonPressed"</span>, forControlEvents: <span class="type">UIControlEvents</span>.<span class="type">TouchUpInside</span>)</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">buttonPressed</span><span class="params">()</span></span> &#123;</div><div class="line">        like.<span class="built_in">count</span>++</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">observeValueForKeyPath</span><span class="params">(keyPath: String, ofObject object: AnyObject, change: [NSObject : AnyObject], context: UnsafeMutablePointer&lt;Void&gt;)</span></span> &#123;</div><div class="line">        <span class="keyword">if</span> <span class="keyword">let</span> label = (view.viewWithTag(<span class="number">1</span>) <span class="keyword">as</span>? <span class="type">UILabel</span>) &#123;</div><div class="line">            label.text = <span class="string">"\(like.count)"</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">deinit</span> &#123;</div><div class="line">        like.removeObserver(<span class="keyword">self</span>, forKeyPath: <span class="string">"count"</span>)</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;KVO(Key-Value Observing)是一种观察者模式。继承自NSObject的对象可以注册监听任何属性的变化，并指定观察者对象。&lt;br&gt;注册监听属性的方法&lt;code&gt;addObserver:forKeyPath:options:context:&lt;/code&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;注：被监听属性要用dynamic关键字修饰&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;方法声明： &lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;addObserver&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(&lt;span class=&quot;number&quot;&gt;_&lt;/span&gt; anObserver: NSObject, //指定观察者对象&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;params&quot;&gt;           forKeyPath keyPath: String, //指定要监听的属性&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;params&quot;&gt;              options options: NSKeyValueObservingOptions, //监听选项，指定要包含在change字典里的数据&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;params&quot;&gt;              context context: UnsafeMutablePointer&amp;lt;Void&amp;gt; //要传递给观察者的数据，可以注册多个相同观察者，相同属性，不同context的监听事件&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;params&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="iOS" scheme="http://snowgan.com/categories/iOS/"/>
    
    
      <category term="Swift" scheme="http://snowgan.com/tags/Swift/"/>
    
  </entry>
  
</feed>

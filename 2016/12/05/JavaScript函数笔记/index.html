<!DOCTYPE html><html lang="zh-cn"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> JavaScript函数笔记 · Snowgan</title><meta name="description" content="JavaScript函数笔记 - Snowgan"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicons2.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://snowgan.com/atom.xml" title="Snowgan"></head><body><div class="wrap"><header><h1 class="blog-title">Snowgan</h1><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">首页</a></li><li class="nav-list-item"><a href="/categories/" target="_self" class="nav-list-link">分类</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">归档</a></li><li class="nav-list-item"><a href="/about/" target="_self" class="nav-list-link">关于我</a></li></ul></header><section class="container"><div class="post"><div class="bread-crumb">/<a href="/categories/Front-End/" class="bread-crumb-item">Front-End</a>/<a href="/categories/Front-End/JavaScript/" class="bread-crumb-item">JavaScript</a></div><article class="post-block"><div class="post-toc"><div class="toc-title">目录</div><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-函数是第一类对象"><span class="toc-text">1. 函数是第一类对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-函数声明和函数表达式"><span class="toc-text">2. 函数声明和函数表达式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-函数参数"><span class="toc-text">3. 函数参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-this和arguments"><span class="toc-text">4. this和arguments</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-箭头函数（ES6）"><span class="toc-text">5. 箭头函数（ES6）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-bind方法"><span class="toc-text">6. bind方法</span></a></li></ol></div><h1 class="post-title">JavaScript函数笔记</h1><div class="post-info">2016年12月5日<span class="tags-info"><a href="/tags/JavaScript/" class="tag-link">JavaScript</a><a href="/tags/Function/" class="tag-link">Function</a></span></div><div class="post-content"><p>和其他编程语言类似，JavaScript的函数也是用{}包裹的一个代码块，通过函数调用执行其方法体，能够进行值传参，并具有返回值，当没有显式声明返回值时，函数返回undefined。</p>
<h3 id="1-函数是第一类对象"><a href="#1-函数是第一类对象" class="headerlink" title="1. 函数是第一类对象"></a>1. 函数是第一类对象</h3><p>JS中的函数是一种对象类型，即是说可以当作对象来使用函数，相比其他对象类型，函数多了能被调用执行的功能。</p>
<p>函数和其他对象的使用对比：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 赋值声明</span></div><div class="line"><span class="keyword">var</span> obj = &#123;&#125;;</div><div class="line"><span class="keyword">var</span> func = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;;</div><div class="line"></div><div class="line"><span class="comment">// 可添加属性</span></div><div class="line">obj.name = <span class="string">'Test'</span>;</div><div class="line">func.name = <span class="string">'Test'</span>;</div><div class="line"></div><div class="line"><span class="comment">// 作为数组元素或对象属性值</span></div><div class="line"><span class="keyword">var</span> testArr = [];</div><div class="line">testArr.push(&#123;&#125;);</div><div class="line">testArr.push(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;);</div><div class="line"></div><div class="line"><span class="keyword">var</span> testObj = &#123;&#125;;</div><div class="line">testObj.item1 = &#123;&#125;;</div><div class="line">testObj.item2 = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;;</div><div class="line"></div><div class="line"><span class="comment">// 作为函数参数</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">testFunc1</span>(<span class="params">arg</span>) </span>&#123;&#125;;</div><div class="line">testFunc1(&#123;&#125;);</div><div class="line">testFunc1(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;);</div><div class="line"></div><div class="line"><span class="comment">// 作为函数返回值</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">testFunc2</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> &#123;&#125;</div><div class="line">&#125;;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">testFunc3</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<a id="more"></a>
<h3 id="2-函数声明和函数表达式"><a href="#2-函数声明和函数表达式" class="headerlink" title="2. 函数声明和函数表达式"></a>2. 函数声明和函数表达式</h3><p>函数声明和函数表达式是两种定义函数的方法，在使用上有些区别。</p>
<p>函数声明以关键字<strong>function</strong>开头，必须指定一个函数名，参数和返回值可选</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params">arg1, arg2...</span>) </span>&#123;</div><div class="line">  state1;</div><div class="line">  state2;</div><div class="line">  <span class="keyword">return</span> val;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>当函数作为表达式的一部分时（赋值右侧、函数参数、函数返回值等），则为函数表达式。函数表达式中的函数名为可选，没有指定函数名的称为匿名函数。</p>
<p><strong>IIFE(Immediately Invoked Function Expression)</strong></p>
<p><code>(function() {})()</code></p>
<p>立即执行函数表达式是指定义函数后立即执行函数体的方法，在函数表达式后加上()，和普通的函数调用方式一样，可传入参数</p>
<p>IIFE必须用一对括号包裹，JS解析器会将括号内的语句解析为一个表达式，如果不加括号，则会解析为一个函数申明，因为函数申明必须指定函数名，所以语句会报错。以下写法也是可以的：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;());</div><div class="line">+<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;();  <span class="comment">// 使用一元操作符也可以达到同样的目的</span></div><div class="line">-<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;();  <span class="comment">// 告诉解析器当前处理的是一个函数表达式而非函数声明</span></div><div class="line">!<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;();</div><div class="line">~<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;();</div></pre></td></tr></table></figure>
<h3 id="3-函数参数"><a href="#3-函数参数" class="headerlink" title="3. 函数参数"></a>3. 函数参数</h3><p>JS中的函数参数都是传值参数，即函数调用时传入的参数都是原数据值的一个拷贝</p>
<p>当传入的数据是<strong>原生</strong>类型，则在函数内部对参数的任何修改都不会影响函数外的原数据</p>
<p>当传入的数据是<strong>对象</strong>类型，由于拷贝的是一个引用，则在函数内部对应的参数指向的是同一个对象，通过参数对该对象的任何修改会同时影响函数外的原数据</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params">obj_argu</span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(obj_argu.name)    <span class="comment">// Snow</span></div><div class="line">  obj_argu.name = <span class="string">'Rain'</span>;</div><div class="line">  <span class="built_in">console</span>.log(obj_argu.name)    <span class="comment">// Rain</span></div><div class="line">  obj_argu = &#123;<span class="attr">name</span>: <span class="string">'Wind'</span>&#125;;</div><div class="line">  <span class="built_in">console</span>.log(obj_argu.name)    <span class="comment">// Wind</span></div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">var</span> Obj = &#123;<span class="attr">name</span>: <span class="string">'Snow'</span>&#125;;</div><div class="line">func(Obj);</div><div class="line"><span class="built_in">console</span>.log(Obj.name)    <span class="comment">// Rain</span></div></pre></td></tr></table></figure>
<p><img src="/image/JavaScript函数笔记/001.png" alt="Function1"></p>
<p><strong>参数默认值</strong></p>
<p>若不给参数传值，则参数的默认值为<code>undefined</code></p>
<p>ES6中可以指定默认值，直接在函数声明参数时赋值<code>function func(a, b = 1) {}</code></p>
<p><strong>剩余参数</strong></p>
<p>加上…前缀代表没有对应形参而剩下的所有实参组成的数组</p>
<p>剩余参数只能定义在形参的最后一个</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params">a, b, ...args</span>) </span>&#123;</div><div class="line">  <span class="comment">// a: 3, b: 6, args: [7, 1, 4, 9, 2]</span></div><div class="line">  <span class="built_in">console</span>.log(args.sort())</div><div class="line">&#125;</div><div class="line">func(<span class="number">3</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">1</span>, <span class="number">4</span>, <span class="number">9</span>, <span class="number">2</span>)  <span class="comment">// [1, 2, 4, 7, 9]</span></div></pre></td></tr></table></figure>
<p><strong>参数解构</strong></p>
<p>ES6新特性，可以使用对象解构或数组解构的形式来实现参数解构</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 对象解构</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params">&#123;a, b&#125;</span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;a&#125;</span> and <span class="subst">$&#123;b&#125;</span>`</span>);  <span class="comment">// You and me</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">func(&#123;<span class="attr">a</span>: <span class="string">'You'</span>, <span class="attr">b</span>: <span class="string">'me'</span>&#125;);</div><div class="line"></div><div class="line"><span class="comment">// 数组解构</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params">[a, b]</span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;a&#125;</span> and <span class="subst">$&#123;b&#125;</span>`</span>);  <span class="comment">// You and me</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">func([<span class="string">'You'</span>, <span class="string">'me'</span>]);</div></pre></td></tr></table></figure>
<h3 id="4-this和arguments"><a href="#4-this和arguments" class="headerlink" title="4. this和arguments"></a>4. this和arguments</h3><p>在调用函数时，一般会隐式传入两个对象：this和arguments</p>
<p><strong>this</strong></p>
<p>也被称作<strong>函数上下文</strong>，其值由函数被调用的方式决定。</p>
<p>this的情况复杂多变，其详解将单独成篇《<a href="/2016/12/09/JavaScript中的this笔记/">JavaScript中的this笔记</a>》</p>
<p><strong>arguments</strong></p>
<p>用于保存所有传入函数的参数，即使没有对应的形参。</p>
<p>具有length属性，可使用数组索引访问方式访问参数元素，但不能在其上调用其他数组方法，因为arguments是一个类数组结构，而不是真正的数组。</p>
<p>在非严格模式下，arguments中的参数元素是其对应形参变量的别名，改变任何一个都将会影响另一个</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params">a, b</span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="built_in">arguments</span>.length); <span class="comment">// 3</span></div><div class="line">  <span class="built_in">console</span>.log(<span class="built_in">arguments</span>[<span class="number">0</span>] === a);  <span class="comment">// true</span></div><div class="line">  </div><div class="line">  <span class="built_in">arguments</span>[<span class="number">0</span>] = <span class="string">'Byebye'</span>;</div><div class="line">  <span class="built_in">console</span>.log(a); <span class="comment">// 'Byebye'</span></div><div class="line">  </div><div class="line">  a = <span class="string">'Welcome'</span>;</div><div class="line">  <span class="built_in">console</span>.log(<span class="built_in">arguments</span>[<span class="number">0</span>]); <span class="comment">// 'Welcome'</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">func(<span class="string">'Hello'</span>, <span class="string">'World'</span>, <span class="string">'!'</span>);</div></pre></td></tr></table></figure>
<h3 id="5-箭头函数（ES6）"><a href="#5-箭头函数（ES6）" class="headerlink" title="5. 箭头函数（ES6）"></a>5. 箭头函数（ES6）</h3><p>是传统函数声明的简写形式，但不会绑定this，arguments，this继承它被创建时所在作用域的this，所以常用于创建回调函数</p>
<p>声明语法：<code>(param1, param2, …, paramN) =&gt; { statements }</code></p>
<p>其他声明规则：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 当函数体只有一个返回语句时，可省略&#123;&#125;</span></div><div class="line"><span class="comment">// 等于: (param1, param2, …, paramN) =&gt; &#123; return expression; &#125;</span></div><div class="line">(param1, param2, …, paramN) =&gt; expression</div><div class="line"></div><div class="line"><span class="comment">// 只有一个参数时括号可省略</span></div><div class="line"><span class="comment">// 等于: (singleParam) =&gt; &#123; statements &#125;</span></div><div class="line">singleParam =&gt; &#123; statements &#125;</div><div class="line"></div><div class="line"><span class="comment">// 无参时使用空括号</span></div><div class="line">() =&gt; &#123; statements &#125;</div><div class="line"></div><div class="line"><span class="comment">// 返回对象字面量时用括号括起来</span></div><div class="line">params =&gt; (&#123;<span class="attr">foo</span>: bar&#125;)</div><div class="line"></div><div class="line"><span class="comment">// ...rest表示其与参数</span></div><div class="line">(param1, param2, ...rest) =&gt; &#123; statements &#125;</div><div class="line"><span class="comment">// 可指定参数默认值</span></div><div class="line">(param1 = defaultValue1, param2, …, paramN = defaultValueN) =&gt; &#123; statements &#125;</div><div class="line"></div><div class="line"><span class="comment">// 可使用参数解构</span></div><div class="line"><span class="keyword">var</span> f = <span class="function">(<span class="params">[a, b] = [<span class="number">1</span>, <span class="number">2</span>], &#123;x: c&#125; = &#123;x: a + b&#125;</span>) =&gt;</span> a + b + c;</div><div class="line">f();  <span class="comment">// 6</span></div></pre></td></tr></table></figure></p>
<h3 id="6-bind方法"><a href="#6-bind方法" class="headerlink" title="6. bind方法"></a>6. bind方法</h3><p>每个函数对象都有一个内置的bind方法，调用该方法将生成一个新的函数对象，不管这个新的函数以何种方式调用，其this值由传入bind的参数决定。</p>
</div></article></div></section><footer><div class="paginator"><a href="/2016/12/09/JavaScript中的this笔记/" class="prev"><<上一篇: JavaScript中的this笔记</a><a href="/2016/12/02/JavaScript数组笔记/" class="next">下一篇: JavaScript数组笔记>></a></div><div id="disqus_thread"></div><script>var disqus_config = function () {
    this.page.url = 'http://snowgan.com/2016/12/05/JavaScript函数笔记/';
    this.page.identifier = '2016/12/05/JavaScript函数笔记/';
};
(function() {
    var d = document, s = d.createElement('script');
    s.src = '//' + 'snowgan' + '.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
})();</script><script id="dsq-count-scr" src="//snowgan.disqus.com/count.js" async></script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript><div class="copyright"><p>© 2015 - 2018 <a href="http://snowgan.com">Snowgan</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create', 'UA-90028164-1', 'auto');ga('send', 'pageview');</script></body></html>